# CONTEXT.md — 项目大背景

> **给我们自己看的背景文件。回答一个问题：这个 AI 到底是什么、不是什么、怎么用。**

---

## 一句话定位

**AI 助理会计。** 不是 AI 会计，不是 chatbot，不是报表工具。
它扮演的是一个事务所里刚入职的 Graduate Accountant——能干活、需要合伙人审阅。

---

## 事务所里的三个角色

| 角色 | 真人做什么 | AI 做什么 |
|------|-----------|----------|
| **合伙人 (Partner)** | 审阅、判断、签字、对客户负责 | ❌ 不替代。AI 交付底稿，合伙人审阅 |
| **助理会计 (Graduate)** | 对账、查异常、算税、出底稿 | ✅ **这就是 AI 要替代的角色** |
| **客户** | 提供数据、问问题、看报告 | ❌ 不替代。客户是服务对象 |

---

## 真实使用场景

**时间**：每月末 / 每季度末
**地点**：NZ 会计事务所，合伙人办公室
**人物**：合伙人 + AI（取代了一个助理）

**合伙人的一天（用了 AI 之后）：**

> 早上 9 点，合伙人打开 Harbourside Plumbing 的文件夹。
> 客户上周把 Westpac 的银行对账单和 Xero 的 GL 导出发过来了。
> 以前这个活要交给助理，助理要花半天对账、半天出底稿。
>
> 现在合伙人把两个文件上传给 AI，说："帮我做 Q1 的季度末。"
>
> AI 开始干活：
> 1. 先对账——44 笔银行交易 vs 57 行 GL 分录，逐笔匹配
> 2. 发现 3 个问题——部分付款、未收款、工资差异
> 3. 对每个问题给出判断和建议——催款？调账？查编码？
> 4. 算 GST——收了多少、付了多少、已交 IRD 多少、还欠多少
> 5. 出 P&L——收入、支出、净利润，按科目分类
> 6. 把以上所有内容汇总成一份底稿，每个数字标注来源
>
> 合伙人拿到底稿，花 10 分钟审阅。
> 有疑问就直接问："Materials 这个季度花了多少？比上季度多吗？"
> AI 立即回答，带来源引用。
>
> 以前需要 1 天的活，现在 30 分钟搞定。

---

## AI 做判断的边界

这是最关键的设计问题：AI 能做什么程度的"判断"？

| 判断类型 | AI 能做吗 | 说明 |
|----------|----------|------|
| 数据匹配（Bank vs GL） | ✅ | 纯规则，100% 自动 |
| 发现异常（金额不匹配、缺失交易） | ✅ | 纯规则 + 阈值 |
| 分类异常严重程度 | ✅ | HIGH/MED/LOW，基于金额和类型 |
| 建议处理方式（催款、调账） | ✅ | 基于会计常识给建议，但标注"建议" |
| GST 计算 | ✅ | 纯数学，NZ 15% 规则明确 |
| P&L 汇总 | ✅ | 纯加减，按科目分类 |
| 判断是否坏账 | ⚠️ | 只能说"超过 X 天未收款，建议考虑"，不能替合伙人决定 |
| 税务申报决策 | ❌ | 只算数字，不替你报税 |
| 审计意见 | ❌ | 不是审计师 |

**原则：AI 做计算和发现，合伙人做决策。AI 永远说"建议"，不说"应该"。**

---

## 测试场景：Harbourside Plumbing Ltd

| 项目 | 值 |
|------|---|
| 公司 | Harbourside Plumbing Ltd，奥克兰水管公司 |
| 期间 | Q1 2026（1-3月） |
| 银行 | Westpac NZ，44 笔交易 |
| 会计系统 | Xero，57 行 GL 分录 |
| 员工 | Mike Tane, Sarah Chen |
| GST | 已注册，15% |
| 故意埋入的 5 个问题 | 见下方 |

### 5 个故意错误（AI 必须全部找到）

| # | 类型 | 详情 | AI 应该怎么说 |
|---|------|------|-------------|
| 1 | 部分付款 | INV-2025-118 (Renovate NZ): 发票 $13,586.96，银行只收到 $12,500 | "未收 $1,086.96，建议跟进 Renovate NZ" |
| 2 | 完全未收款 | INV-2026-004 (D Morrison): 发票 $6,413.04，银行 $0 | "截至 3/31 无收款记录，建议发催款函" |
| 3 | 工资差异 | REF011 (Sarah Chen Jan W3): 银行 $3,800，GL $3,478.26 | "差 $321.74，可能是 PAYE/KiwiSaver 编码问题" |
| 4 | GST 验证 | REF023: GST Payment $3,200 — 需要验证是否与实际 GST 负债匹配 | "Jan GST payment $3,200，需验证与计算值是否一致" |
| 5 | 正确交易（不应误报） | REF021 (Trade Tools): 银行 $2,700 = GL $2,347.83 + GST $352.17 | 不应标记为异常 |

---

## 季度末完整工作流程（= Journey 顺序）

一个 NZ 事务所助理会计做季度末的真实步骤：

```
合伙人说："帮我做 Harbourside 的 Q1"
    │
    ▼
J1. 对账 — Bank vs GL 逐笔匹配，找出所有不匹配的
    │
    ▼
J2. 查异常 — 每个不匹配的追查原因，给出会计判断和处理建议
    │
    ▼
J3. 算 GST — 收了多少、付了多少、已交多少、还欠多少
    │
    ▼
J4. 出 P&L — Revenue - Expenses = Net Profit，按科目分类
    │
    ▼
J5. 生成底稿 — 把 J1-J4 汇总成 Working Paper，每个数字可溯源
    │
    ▼
J6. 合伙人审阅 — 上传文件、看结果、随时追问细节
```

**每个 Journey = 助理会计工作流的一个真实步骤。不是技术功能，是工作任务。**

---

## NZ 会计规则备忘（已验证）

| 规则 | 值 | 来源 |
|------|---|------|
| GST 税率 | 15% | IRD.govt.nz |
| GST 报频率 | 常见 2 月一报（也可月报/半年报） | IRD.govt.nz |
| GST due date | 期末后下月 28 号（3月期限延到 5月7号） | IRD.govt.nz |
| GST 核算方式 | Invoice basis 或 Payments basis | IRD.govt.nz |
| 记录保留 | 7 年（Tax Administration Act） | IRD.govt.nz |
| Financial Year | 4月1日 — 3月31日 | IRD.govt.nz |
| ACC Levies | 雇主必须缴纳，按行业风险定价 | ACC.co.nz |
| KiwiSaver | 雇主最低 3% 匹配 | IRD.govt.nz |

---

## 数据支持情况

| Journey | 需要的数据 | Harbourside 有吗 |
|---------|-----------|-----------------|
| J1 对账 | Bank CSV + GL CSV | ✅ 44笔 + 57行 |
| J2 查异常 | 对账结果 + 原始数据 | ✅ 5个故意错误 |
| J3 算 GST | GL 的 Tax Rate + Tax Amount + GST payments | ✅ 每行都有 |
| J4 出 P&L | GL 的 Account Code + Debit/Credit | ✅ 10个科目 |
| J5 生成底稿 | J1-J4 的全部输出 | ✅ 全来自上面 |
| J6 合伙人审阅 | Chat UI + 底稿 | 需要前端 |

**结论：J1-J5 用现有 Harbourside 数据可以完全做出来，不需要造新数据。J6 需要前端。**
