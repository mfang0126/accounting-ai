{"version":3,"sources":["../src/server/schemas/tool-providers.ts","../src/server/handlers/tool-providers.ts"],"names":[],"mappings":"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","file":"chunk-XI42534Q.js","sourcesContent":["import z from 'zod';\n\n// ============================================================================\n// Path Parameter Schemas\n// ============================================================================\n\nexport const toolProviderIdPathParams = z.object({\n  providerId: z.string().describe('Unique identifier for the tool provider'),\n});\n\nexport const toolSlugPathParams = toolProviderIdPathParams.extend({\n  toolSlug: z.string().describe('Slug identifier for the tool'),\n});\n\n// ============================================================================\n// Query Parameter Schemas\n// ============================================================================\n\nexport const listToolProviderToolsQuerySchema = z.object({\n  toolkit: z.string().optional().describe('Filter tools by toolkit slug'),\n  search: z.string().optional().describe('Search tools by name or description'),\n  page: z.coerce.number().optional().describe('Page number for pagination'),\n  perPage: z.coerce.number().optional().describe('Number of items per page'),\n});\n\n// ============================================================================\n// Response Schemas\n// ============================================================================\n\nconst paginationSchema = z\n  .object({\n    total: z.number().optional(),\n    page: z.number().optional(),\n    perPage: z.number().optional(),\n    hasMore: z.boolean(),\n  })\n  .optional();\n\nexport const listToolProvidersResponseSchema = z.object({\n  providers: z.array(\n    z.object({\n      id: z.string(),\n      name: z.string(),\n      description: z.string().optional(),\n    }),\n  ),\n});\n\nexport const listToolProviderToolkitsResponseSchema = z.object({\n  data: z.array(\n    z.object({\n      slug: z.string(),\n      name: z.string(),\n      description: z.string().optional(),\n      icon: z.string().optional(),\n    }),\n  ),\n  pagination: paginationSchema,\n});\n\nexport const listToolProviderToolsResponseSchema = z.object({\n  data: z.array(\n    z.object({\n      slug: z.string(),\n      name: z.string(),\n      description: z.string().optional(),\n      toolkit: z.string().optional(),\n    }),\n  ),\n  pagination: paginationSchema,\n});\n\nexport const getToolProviderToolSchemaResponseSchema = z.record(z.string(), z.unknown());\n","import { HTTPException } from '../http-exception';\nimport {\n  toolProviderIdPathParams,\n  toolSlugPathParams,\n  listToolProviderToolsQuerySchema,\n  listToolProvidersResponseSchema,\n  listToolProviderToolkitsResponseSchema,\n  listToolProviderToolsResponseSchema,\n  getToolProviderToolSchemaResponseSchema,\n} from '../schemas/tool-providers';\nimport { createRoute } from '../server-adapter/routes/route-builder';\n\nimport { handleError } from './error';\n\n// ============================================================================\n// Route Definitions\n// ============================================================================\n\n/**\n * GET /tool-providers - List all registered tool providers\n */\nexport const LIST_TOOL_PROVIDERS_ROUTE = createRoute({\n  method: 'GET',\n  path: '/tool-providers',\n  responseType: 'json',\n  responseSchema: listToolProvidersResponseSchema,\n  summary: 'List tool providers',\n  description: 'Returns a list of all registered tool providers with their info',\n  tags: ['Tool Providers'],\n  requiresAuth: true,\n  handler: async ({ mastra }) => {\n    try {\n      const editor = mastra.getEditor();\n\n      if (!editor) {\n        throw new HTTPException(500, { message: 'Editor is not configured' });\n      }\n\n      const providers = editor.getToolProviders();\n\n      return { providers: Object.values(providers).map(provider => provider.info) };\n    } catch (error) {\n      return handleError(error, 'Error listing tool providers');\n    }\n  },\n});\n\n/**\n * GET /tool-providers/:providerId/toolkits - List toolkits for a tool provider\n */\nexport const LIST_TOOL_PROVIDER_TOOLKITS_ROUTE = createRoute({\n  method: 'GET',\n  path: '/tool-providers/:providerId/toolkits',\n  responseType: 'json',\n  pathParamSchema: toolProviderIdPathParams,\n  responseSchema: listToolProviderToolkitsResponseSchema,\n  summary: 'List tool provider toolkits',\n  description: 'Returns the toolkits available from a specific tool provider',\n  tags: ['Tool Providers'],\n  requiresAuth: true,\n  handler: async ({ mastra, providerId }) => {\n    try {\n      const editor = mastra.getEditor();\n\n      if (!editor) {\n        throw new HTTPException(500, { message: 'Editor is not configured' });\n      }\n\n      const provider = editor.getToolProvider(providerId);\n\n      if (!provider) {\n        throw new HTTPException(404, { message: `Tool provider with id ${providerId} not found` });\n      }\n\n      if (!provider.listToolkits) {\n        return { data: [] };\n      }\n\n      return await provider.listToolkits();\n    } catch (error) {\n      return handleError(error, 'Error listing tool provider toolkits');\n    }\n  },\n});\n\n/**\n * GET /tool-providers/:providerId/tools - List tools for a tool provider\n */\nexport const LIST_TOOL_PROVIDER_TOOLS_ROUTE = createRoute({\n  method: 'GET',\n  path: '/tool-providers/:providerId/tools',\n  responseType: 'json',\n  pathParamSchema: toolProviderIdPathParams,\n  queryParamSchema: listToolProviderToolsQuerySchema,\n  responseSchema: listToolProviderToolsResponseSchema,\n  summary: 'List tool provider tools',\n  description: 'Returns the tools available from a specific tool provider, with optional filtering',\n  tags: ['Tool Providers'],\n  requiresAuth: true,\n  handler: async ({ mastra, providerId, toolkit, search, page, perPage }) => {\n    try {\n      const editor = mastra.getEditor();\n\n      if (!editor) {\n        throw new HTTPException(500, { message: 'Editor is not configured' });\n      }\n\n      const provider = editor.getToolProvider(providerId);\n\n      if (!provider) {\n        throw new HTTPException(404, { message: `Tool provider with id ${providerId} not found` });\n      }\n\n      const options: Record<string, unknown> = {};\n      if (toolkit !== undefined) options.toolkit = toolkit;\n      if (search !== undefined) options.search = search;\n      if (page !== undefined) options.page = page;\n      if (perPage !== undefined) options.perPage = perPage;\n\n      return await provider.listTools(Object.keys(options).length > 0 ? options : undefined);\n    } catch (error) {\n      return handleError(error, 'Error listing tool provider tools');\n    }\n  },\n});\n\n/**\n * GET /tool-providers/:providerId/tools/:toolSlug/schema - Get tool schema\n */\nexport const GET_TOOL_PROVIDER_TOOL_SCHEMA_ROUTE = createRoute({\n  method: 'GET',\n  path: '/tool-providers/:providerId/tools/:toolSlug/schema',\n  responseType: 'json',\n  pathParamSchema: toolSlugPathParams,\n  responseSchema: getToolProviderToolSchemaResponseSchema,\n  summary: 'Get tool provider tool schema',\n  description: 'Returns the schema for a specific tool from a tool provider',\n  tags: ['Tool Providers'],\n  requiresAuth: true,\n  handler: async ({ mastra, providerId, toolSlug }) => {\n    try {\n      const editor = mastra.getEditor();\n\n      if (!editor) {\n        throw new HTTPException(500, { message: 'Editor is not configured' });\n      }\n\n      const provider = editor.getToolProvider(providerId);\n\n      if (!provider) {\n        throw new HTTPException(404, { message: `Tool provider with id ${providerId} not found` });\n      }\n\n      if (!provider.getToolSchema) {\n        throw new HTTPException(404, { message: `Tool provider ${providerId} does not support getToolSchema` });\n      }\n\n      const schema = await provider.getToolSchema(toolSlug);\n\n      if (!schema) {\n        throw new HTTPException(404, { message: `Schema for tool ${toolSlug} not found in provider ${providerId}` });\n      }\n\n      return schema;\n    } catch (error) {\n      return handleError(error, 'Error getting tool provider tool schema');\n    }\n  },\n});\n"]}