{"version":3,"sources":["../src/server/schemas/stored-workspaces.ts"],"names":["z","createPagePaginationSchema","paginationInfoSchema"],"mappings":"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","file":"chunk-4Q3QO4MB.cjs","sourcesContent":["import z from 'zod';\n\nimport { paginationInfoSchema, createPagePaginationSchema } from './common';\n\n// ============================================================================\n// Path Parameter Schemas\n// ============================================================================\n\nexport const storedWorkspaceIdPathParams = z.object({\n  storedWorkspaceId: z.string().describe('Unique identifier for the stored workspace'),\n});\n\n// ============================================================================\n// Query Parameter Schemas\n// ============================================================================\n\nconst storageOrderBySchema = z.object({\n  field: z.enum(['createdAt', 'updatedAt']).optional(),\n  direction: z.enum(['ASC', 'DESC']).optional(),\n});\n\nexport const listStoredWorkspacesQuerySchema = createPagePaginationSchema(100).extend({\n  orderBy: storageOrderBySchema.optional(),\n  authorId: z.string().optional().describe('Filter workspaces by author identifier'),\n  metadata: z.record(z.string(), z.unknown()).optional().describe('Filter workspaces by metadata key-value pairs'),\n});\n\n// ============================================================================\n// Body Parameter Schemas\n// ============================================================================\n\nconst filesystemConfigSchema = z.object({\n  provider: z.string().describe('Filesystem provider name'),\n  config: z.record(z.string(), z.unknown()).describe('Filesystem provider configuration'),\n});\n\nconst sandboxConfigSchema = z.object({\n  provider: z.string().describe('Sandbox provider name'),\n  config: z.record(z.string(), z.unknown()).describe('Sandbox provider configuration'),\n});\n\nconst searchConfigSchema = z.object({\n  vectorProvider: z.string().optional().describe('Vector store provider identifier'),\n  vectorConfig: z.record(z.string(), z.unknown()).optional().describe('Vector store provider-specific configuration'),\n  embedderProvider: z.string().optional().describe('Embedder provider identifier'),\n  embedderModel: z.string().optional().describe('Embedder model name'),\n  embedderConfig: z.record(z.string(), z.unknown()).optional().describe('Embedder provider-specific configuration'),\n  bm25: z\n    .union([z.boolean(), z.object({ k1: z.number().optional(), b: z.number().optional() })])\n    .optional()\n    .describe('BM25 keyword search config'),\n  searchIndexName: z.string().optional().describe('Custom index name for the vector store'),\n  autoIndexPaths: z.array(z.string()).optional().describe('Paths to auto-index on init'),\n});\n\nconst workspaceToolConfigSchema = z.object({\n  enabled: z.boolean().optional().describe('Whether the tool is enabled'),\n  requireApproval: z.boolean().optional().describe('Whether the tool requires user approval before execution'),\n  requireReadBeforeWrite: z\n    .boolean()\n    .optional()\n    .describe('For write tools: require reading a file before writing to it'),\n});\n\nconst workspaceToolsConfigSchema = z.object({\n  enabled: z.boolean().optional().describe('Default: whether all tools are enabled'),\n  requireApproval: z.boolean().optional().describe('Default: whether all tools require user approval'),\n  tools: z\n    .record(z.string(), workspaceToolConfigSchema)\n    .optional()\n    .describe('Per-tool overrides keyed by workspace tool name'),\n});\n\nconst snapshotConfigSchema = z.object({\n  name: z.string().describe('Name of the workspace'),\n  description: z.string().optional().describe('Description of the workspace'),\n  filesystem: filesystemConfigSchema.optional().describe('Filesystem configuration'),\n  sandbox: sandboxConfigSchema.optional().describe('Sandbox configuration'),\n  mounts: z.record(z.string(), filesystemConfigSchema).optional().describe('Mounted filesystems keyed by mount path'),\n  search: searchConfigSchema.optional().describe('Search configuration'),\n  skills: z.array(z.string()).optional().describe('Array of skill IDs'),\n  tools: workspaceToolsConfigSchema.optional().describe('Workspace tool configuration'),\n  autoSync: z.boolean().optional().describe('Whether to automatically sync the workspace'),\n  operationTimeout: z.number().optional().describe('Operation timeout in milliseconds'),\n});\n\nexport const createStoredWorkspaceBodySchema = z\n  .object({\n    id: z.string().optional().describe('Unique identifier. If not provided, derived from name.'),\n    authorId: z.string().optional().describe('Author identifier for multi-tenant filtering'),\n    metadata: z.record(z.string(), z.unknown()).optional().describe('Additional metadata for the workspace'),\n  })\n  .merge(snapshotConfigSchema);\n\nexport const updateStoredWorkspaceBodySchema = z\n  .object({\n    authorId: z.string().optional(),\n    metadata: z.record(z.string(), z.unknown()).optional(),\n  })\n  .partial()\n  .merge(snapshotConfigSchema.partial());\n\n// ============================================================================\n// Response Schemas\n// ============================================================================\n\nexport const storedWorkspaceSchema = z.object({\n  id: z.string(),\n  status: z.string().describe('Workspace status: draft, published, or archived'),\n  activeVersionId: z.string().optional(),\n  authorId: z.string().optional(),\n  metadata: z.record(z.string(), z.unknown()).optional(),\n  createdAt: z.coerce.date(),\n  updatedAt: z.coerce.date(),\n  name: z.string().describe('Name of the workspace'),\n  description: z.string().optional().describe('Description of the workspace'),\n  filesystem: filesystemConfigSchema.optional().describe('Filesystem configuration'),\n  sandbox: sandboxConfigSchema.optional().describe('Sandbox configuration'),\n  mounts: z.record(z.string(), filesystemConfigSchema).optional().describe('Mounted filesystems keyed by mount path'),\n  search: searchConfigSchema.optional().describe('Search configuration'),\n  skills: z.array(z.string()).optional().describe('Array of skill IDs'),\n  tools: workspaceToolsConfigSchema.optional().describe('Workspace tool configuration'),\n  autoSync: z.boolean().optional().describe('Whether to automatically sync the workspace'),\n  operationTimeout: z.number().optional().describe('Operation timeout in milliseconds'),\n});\n\nexport const listStoredWorkspacesResponseSchema = paginationInfoSchema.extend({\n  workspaces: z.array(storedWorkspaceSchema),\n});\n\nexport const getStoredWorkspaceResponseSchema = storedWorkspaceSchema;\nexport const createStoredWorkspaceResponseSchema = storedWorkspaceSchema;\n\nexport const updateStoredWorkspaceResponseSchema = z.union([\n  z.object({\n    id: z.string(),\n    status: z.string(),\n    activeVersionId: z.string().optional(),\n    authorId: z.string().optional(),\n    metadata: z.record(z.string(), z.unknown()).optional(),\n    createdAt: z.coerce.date(),\n    updatedAt: z.coerce.date(),\n  }),\n  storedWorkspaceSchema,\n]);\n\nexport const deleteStoredWorkspaceResponseSchema = z.object({\n  success: z.boolean(),\n  message: z.string(),\n});\n\nexport { snapshotConfigSchema as workspaceSnapshotConfigSchema };\n"]}