{"version":3,"sources":["../src/server/schemas/processor-providers.ts","../src/server/handlers/processor-providers.ts"],"names":["z","createRoute","HTTPException","handleError","zodToJsonSchema"],"mappings":"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","file":"chunk-PUHV6FJA.cjs","sourcesContent":["import z from 'zod';\n\n// ============================================================================\n// Path Parameter Schemas\n// ============================================================================\n\nexport const processorProviderIdPathParams = z.object({\n  providerId: z.string().describe('Unique identifier for the processor provider'),\n});\n\n// ============================================================================\n// Response Schemas\n// ============================================================================\n\nconst processorPhaseSchema = z.enum([\n  'processInput',\n  'processInputStep',\n  'processOutputStream',\n  'processOutputResult',\n  'processOutputStep',\n]);\n\nexport const getProcessorProvidersResponseSchema = z.object({\n  providers: z.array(\n    z.object({\n      id: z.string(),\n      name: z.string(),\n      description: z.string().optional(),\n      availablePhases: z.array(processorPhaseSchema),\n    }),\n  ),\n});\n\nexport const getProcessorProviderResponseSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  description: z.string().optional(),\n  availablePhases: z.array(processorPhaseSchema),\n  configSchema: z.record(z.string(), z.unknown()),\n});\n","import { zodToJsonSchema } from '@mastra/core/utils/zod-to-json';\n\nimport { HTTPException } from '../http-exception';\nimport {\n  processorProviderIdPathParams,\n  getProcessorProvidersResponseSchema,\n  getProcessorProviderResponseSchema,\n} from '../schemas/processor-providers';\nimport { createRoute } from '../server-adapter/routes/route-builder';\n\nimport { handleError } from './error';\n\n// ============================================================================\n// Route Definitions\n// ============================================================================\n\n/**\n * GET /processor-providers - List all registered processor providers\n */\nexport const LIST_PROCESSOR_PROVIDERS_ROUTE = createRoute({\n  method: 'GET',\n  path: '/processor-providers',\n  responseType: 'json',\n  responseSchema: getProcessorProvidersResponseSchema,\n  summary: 'List processor providers',\n  description: 'Returns a list of all registered processor providers with their info and available phases',\n  tags: ['Processor Providers'],\n  requiresAuth: true,\n  handler: async ({ mastra }) => {\n    try {\n      const editor = mastra.getEditor();\n\n      if (!editor) {\n        throw new HTTPException(500, { message: 'Editor is not configured' });\n      }\n\n      const providers = editor.getProcessorProviders();\n\n      return {\n        providers: Object.values(providers).map(provider => ({\n          ...provider.info,\n          availablePhases: provider.availablePhases,\n        })),\n      };\n    } catch (error) {\n      return handleError(error, 'Error listing processor providers');\n    }\n  },\n});\n\n/**\n * GET /processor-providers/:providerId - Get a specific processor provider with config schema\n */\nexport const GET_PROCESSOR_PROVIDER_ROUTE = createRoute({\n  method: 'GET',\n  path: '/processor-providers/:providerId',\n  responseType: 'json',\n  pathParamSchema: processorProviderIdPathParams,\n  responseSchema: getProcessorProviderResponseSchema,\n  summary: 'Get processor provider details',\n  description: 'Returns details about a specific processor provider, including its configuration schema',\n  tags: ['Processor Providers'],\n  requiresAuth: true,\n  handler: async ({ mastra, providerId }) => {\n    try {\n      const editor = mastra.getEditor();\n\n      if (!editor) {\n        throw new HTTPException(500, { message: 'Editor is not configured' });\n      }\n\n      const provider = editor.getProcessorProvider(providerId);\n\n      if (!provider) {\n        throw new HTTPException(404, { message: `Processor provider with id ${providerId} not found` });\n      }\n\n      return {\n        ...provider.info,\n        availablePhases: provider.availablePhases,\n        configSchema: zodToJsonSchema(provider.configSchema) as Record<string, unknown>,\n      };\n    } catch (error) {\n      return handleError(error, 'Error getting processor provider');\n    }\n  },\n});\n"]}