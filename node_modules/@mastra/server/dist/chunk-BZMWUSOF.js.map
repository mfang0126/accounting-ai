{"version":3,"sources":["../src/server/schemas/stored-workspaces.ts"],"names":[],"mappings":"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","file":"chunk-BZMWUSOF.js","sourcesContent":["import z from 'zod';\n\nimport { paginationInfoSchema, createPagePaginationSchema } from './common';\n\n// ============================================================================\n// Path Parameter Schemas\n// ============================================================================\n\nexport const storedWorkspaceIdPathParams = z.object({\n  storedWorkspaceId: z.string().describe('Unique identifier for the stored workspace'),\n});\n\n// ============================================================================\n// Query Parameter Schemas\n// ============================================================================\n\nconst storageOrderBySchema = z.object({\n  field: z.enum(['createdAt', 'updatedAt']).optional(),\n  direction: z.enum(['ASC', 'DESC']).optional(),\n});\n\nexport const listStoredWorkspacesQuerySchema = createPagePaginationSchema(100).extend({\n  orderBy: storageOrderBySchema.optional(),\n  authorId: z.string().optional().describe('Filter workspaces by author identifier'),\n  metadata: z.record(z.string(), z.unknown()).optional().describe('Filter workspaces by metadata key-value pairs'),\n});\n\n// ============================================================================\n// Body Parameter Schemas\n// ============================================================================\n\nconst filesystemConfigSchema = z.object({\n  provider: z.string().describe('Filesystem provider name'),\n  config: z.record(z.string(), z.unknown()).describe('Filesystem provider configuration'),\n});\n\nconst sandboxConfigSchema = z.object({\n  provider: z.string().describe('Sandbox provider name'),\n  config: z.record(z.string(), z.unknown()).describe('Sandbox provider configuration'),\n});\n\nconst searchConfigSchema = z.object({\n  vectorProvider: z.string().optional().describe('Vector store provider identifier'),\n  vectorConfig: z.record(z.string(), z.unknown()).optional().describe('Vector store provider-specific configuration'),\n  embedderProvider: z.string().optional().describe('Embedder provider identifier'),\n  embedderModel: z.string().optional().describe('Embedder model name'),\n  embedderConfig: z.record(z.string(), z.unknown()).optional().describe('Embedder provider-specific configuration'),\n  bm25: z\n    .union([z.boolean(), z.object({ k1: z.number().optional(), b: z.number().optional() })])\n    .optional()\n    .describe('BM25 keyword search config'),\n  searchIndexName: z.string().optional().describe('Custom index name for the vector store'),\n  autoIndexPaths: z.array(z.string()).optional().describe('Paths to auto-index on init'),\n});\n\nconst workspaceToolConfigSchema = z.object({\n  enabled: z.boolean().optional().describe('Whether the tool is enabled'),\n  requireApproval: z.boolean().optional().describe('Whether the tool requires user approval before execution'),\n  requireReadBeforeWrite: z\n    .boolean()\n    .optional()\n    .describe('For write tools: require reading a file before writing to it'),\n});\n\nconst workspaceToolsConfigSchema = z.object({\n  enabled: z.boolean().optional().describe('Default: whether all tools are enabled'),\n  requireApproval: z.boolean().optional().describe('Default: whether all tools require user approval'),\n  tools: z\n    .record(z.string(), workspaceToolConfigSchema)\n    .optional()\n    .describe('Per-tool overrides keyed by workspace tool name'),\n});\n\nconst snapshotConfigSchema = z.object({\n  name: z.string().describe('Name of the workspace'),\n  description: z.string().optional().describe('Description of the workspace'),\n  filesystem: filesystemConfigSchema.optional().describe('Filesystem configuration'),\n  sandbox: sandboxConfigSchema.optional().describe('Sandbox configuration'),\n  mounts: z.record(z.string(), filesystemConfigSchema).optional().describe('Mounted filesystems keyed by mount path'),\n  search: searchConfigSchema.optional().describe('Search configuration'),\n  skills: z.array(z.string()).optional().describe('Array of skill IDs'),\n  tools: workspaceToolsConfigSchema.optional().describe('Workspace tool configuration'),\n  autoSync: z.boolean().optional().describe('Whether to automatically sync the workspace'),\n  operationTimeout: z.number().optional().describe('Operation timeout in milliseconds'),\n});\n\nexport const createStoredWorkspaceBodySchema = z\n  .object({\n    id: z.string().optional().describe('Unique identifier. If not provided, derived from name.'),\n    authorId: z.string().optional().describe('Author identifier for multi-tenant filtering'),\n    metadata: z.record(z.string(), z.unknown()).optional().describe('Additional metadata for the workspace'),\n  })\n  .merge(snapshotConfigSchema);\n\nexport const updateStoredWorkspaceBodySchema = z\n  .object({\n    authorId: z.string().optional(),\n    metadata: z.record(z.string(), z.unknown()).optional(),\n  })\n  .partial()\n  .merge(snapshotConfigSchema.partial());\n\n// ============================================================================\n// Response Schemas\n// ============================================================================\n\nexport const storedWorkspaceSchema = z.object({\n  id: z.string(),\n  status: z.string().describe('Workspace status: draft, published, or archived'),\n  activeVersionId: z.string().optional(),\n  authorId: z.string().optional(),\n  metadata: z.record(z.string(), z.unknown()).optional(),\n  createdAt: z.coerce.date(),\n  updatedAt: z.coerce.date(),\n  name: z.string().describe('Name of the workspace'),\n  description: z.string().optional().describe('Description of the workspace'),\n  filesystem: filesystemConfigSchema.optional().describe('Filesystem configuration'),\n  sandbox: sandboxConfigSchema.optional().describe('Sandbox configuration'),\n  mounts: z.record(z.string(), filesystemConfigSchema).optional().describe('Mounted filesystems keyed by mount path'),\n  search: searchConfigSchema.optional().describe('Search configuration'),\n  skills: z.array(z.string()).optional().describe('Array of skill IDs'),\n  tools: workspaceToolsConfigSchema.optional().describe('Workspace tool configuration'),\n  autoSync: z.boolean().optional().describe('Whether to automatically sync the workspace'),\n  operationTimeout: z.number().optional().describe('Operation timeout in milliseconds'),\n});\n\nexport const listStoredWorkspacesResponseSchema = paginationInfoSchema.extend({\n  workspaces: z.array(storedWorkspaceSchema),\n});\n\nexport const getStoredWorkspaceResponseSchema = storedWorkspaceSchema;\nexport const createStoredWorkspaceResponseSchema = storedWorkspaceSchema;\n\nexport const updateStoredWorkspaceResponseSchema = z.union([\n  z.object({\n    id: z.string(),\n    status: z.string(),\n    activeVersionId: z.string().optional(),\n    authorId: z.string().optional(),\n    metadata: z.record(z.string(), z.unknown()).optional(),\n    createdAt: z.coerce.date(),\n    updatedAt: z.coerce.date(),\n  }),\n  storedWorkspaceSchema,\n]);\n\nexport const deleteStoredWorkspaceResponseSchema = z.object({\n  success: z.boolean(),\n  message: z.string(),\n});\n\nexport { snapshotConfigSchema as workspaceSnapshotConfigSchema };\n"]}