{"version":3,"sources":["../../../src/server/server-adapter/routes/a2a.ts","../../../src/server/server-adapter/routes/agent-builder.ts","../../../src/server/server-adapter/routes/agents.ts","../../../src/server/server-adapter/routes/datasets.ts","../../../src/server/server-adapter/routes/legacy.ts","../../../src/server/server-adapter/routes/logs.ts","../../../src/server/server-adapter/routes/mcp.ts","../../../src/server/server-adapter/routes/memory.ts","../../../src/server/server-adapter/routes/observability.ts","../../../src/server/server-adapter/routes/processor-providers.ts","../../../src/server/server-adapter/routes/processors.ts","../../../src/server/server-adapter/routes/scorers.ts","../../../src/server/server-adapter/routes/stored-agents.ts","../../../src/server/server-adapter/routes/stored-mcp-clients.ts","../../../src/server/server-adapter/routes/stored-prompt-blocks.ts","../../../src/server/server-adapter/routes/stored-scorers.ts","../../../src/server/server-adapter/routes/stored-skills.ts","../../../src/server/server-adapter/routes/stored-workspaces.ts","../../../src/server/server-adapter/routes/system.ts","../../../src/server/server-adapter/routes/tool-providers.ts","../../../src/server/server-adapter/routes/tools.ts","../../../src/server/server-adapter/routes/vectors.ts","../../../src/server/server-adapter/routes/workflows.ts","../../../src/server/server-adapter/routes/workspace.ts","../../../src/server/server-adapter/routes/index.ts","../../../src/server/server-adapter/redact.ts","../../../src/server/server-adapter/index.ts"],"names":["GET_AGENT_CARD_ROUTE","AGENT_EXECUTION_ROUTE","LIST_AGENT_BUILDER_ACTIONS_ROUTE","GET_AGENT_BUILDER_ACTION_BY_ID_ROUTE","LIST_AGENT_BUILDER_ACTION_RUNS_ROUTE","GET_AGENT_BUILDER_ACTION_RUN_BY_ID_ROUTE","CREATE_AGENT_BUILDER_ACTION_RUN_ROUTE","STREAM_AGENT_BUILDER_ACTION_ROUTE","START_ASYNC_AGENT_BUILDER_ACTION_ROUTE","START_AGENT_BUILDER_ACTION_RUN_ROUTE","OBSERVE_STREAM_AGENT_BUILDER_ACTION_ROUTE","RESUME_ASYNC_AGENT_BUILDER_ACTION_ROUTE","RESUME_AGENT_BUILDER_ACTION_ROUTE","RESUME_STREAM_AGENT_BUILDER_ACTION_ROUTE","CANCEL_AGENT_BUILDER_ACTION_RUN_ROUTE","LIST_AGENTS_ROUTE","GET_PROVIDERS_ROUTE","GET_AGENT_BY_ID_ROUTE","CLONE_AGENT_ROUTE","GET_SPEAKERS_ROUTE","GET_SPEAKERS_DEPRECATED_ROUTE","GENERATE_AGENT_ROUTE","GENERATE_AGENT_VNEXT_ROUTE","STREAM_GENERATE_ROUTE","STREAM_GENERATE_VNEXT_DEPRECATED_ROUTE","EXECUTE_AGENT_TOOL_ROUTE","APPROVE_TOOL_CALL_ROUTE","DECLINE_TOOL_CALL_ROUTE","APPROVE_TOOL_CALL_GENERATE_ROUTE","DECLINE_TOOL_CALL_GENERATE_ROUTE","APPROVE_NETWORK_TOOL_CALL_ROUTE","DECLINE_NETWORK_TOOL_CALL_ROUTE","STREAM_NETWORK_ROUTE","UPDATE_AGENT_MODEL_ROUTE","RESET_AGENT_MODEL_ROUTE","REORDER_AGENT_MODEL_LIST_ROUTE","UPDATE_AGENT_MODEL_IN_MODEL_LIST_ROUTE","ENHANCE_INSTRUCTIONS_ROUTE","GET_AGENT_TOOL_ROUTE","GET_AGENT_SKILL_ROUTE","GENERATE_SPEECH_ROUTE","GENERATE_SPEECH_DEPRECATED_ROUTE","TRANSCRIBE_SPEECH_ROUTE","TRANSCRIBE_SPEECH_DEPRECATED_ROUTE","GET_LISTENER_ROUTE","STREAM_VNEXT_DEPRECATED_ROUTE","STREAM_UI_MESSAGE_VNEXT_DEPRECATED_ROUTE","STREAM_UI_MESSAGE_DEPRECATED_ROUTE","LIST_DATASETS_ROUTE","CREATE_DATASET_ROUTE","GET_DATASET_ROUTE","UPDATE_DATASET_ROUTE","DELETE_DATASET_ROUTE","LIST_ITEMS_ROUTE","ADD_ITEM_ROUTE","BATCH_INSERT_ITEMS_ROUTE","BATCH_DELETE_ITEMS_ROUTE","GET_ITEM_ROUTE","UPDATE_ITEM_ROUTE","DELETE_ITEM_ROUTE","LIST_DATASET_VERSIONS_ROUTE","LIST_ITEM_VERSIONS_ROUTE","GET_ITEM_VERSION_ROUTE","LIST_EXPERIMENTS_ROUTE","TRIGGER_EXPERIMENT_ROUTE","GET_EXPERIMENT_ROUTE","LIST_EXPERIMENT_RESULTS_ROUTE","COMPARE_EXPERIMENTS_ROUTE","GENERATE_LEGACY_ROUTE","STREAM_GENERATE_LEGACY_ROUTE","STREAM_LEGACY_WORKFLOW_ROUTE","OBSERVE_STREAM_LEGACY_WORKFLOW_ROUTE","STREAM_LEGACY_AGENT_BUILDER_ACTION_ROUTE","OBSERVE_STREAM_LEGACY_AGENT_BUILDER_ACTION_ROUTE","LIST_LOG_TRANSPORTS_ROUTE","LIST_LOGS_ROUTE","LIST_LOGS_BY_RUN_ID_ROUTE","LIST_MCP_SERVERS_ROUTE","GET_MCP_SERVER_DETAIL_ROUTE","LIST_MCP_SERVER_TOOLS_ROUTE","GET_MCP_SERVER_TOOL_DETAIL_ROUTE","EXECUTE_MCP_SERVER_TOOL_ROUTE","MCP_HTTP_TRANSPORT_ROUTE","MCP_SSE_TRANSPORT_ROUTE","MCP_SSE_MESSAGES_ROUTE","GET_MEMORY_STATUS_ROUTE","GET_MEMORY_CONFIG_ROUTE","GET_OBSERVATIONAL_MEMORY_ROUTE","AWAIT_BUFFER_STATUS_ROUTE","LIST_THREADS_ROUTE","GET_THREAD_BY_ID_ROUTE","LIST_MESSAGES_ROUTE","GET_WORKING_MEMORY_ROUTE","SAVE_MESSAGES_ROUTE","CREATE_THREAD_ROUTE","UPDATE_THREAD_ROUTE","DELETE_THREAD_ROUTE","CLONE_THREAD_ROUTE","UPDATE_WORKING_MEMORY_ROUTE","DELETE_MESSAGES_ROUTE","SEARCH_MEMORY_ROUTE","GET_MEMORY_STATUS_NETWORK_ROUTE","LIST_THREADS_NETWORK_ROUTE","GET_THREAD_BY_ID_NETWORK_ROUTE","LIST_MESSAGES_NETWORK_ROUTE","SAVE_MESSAGES_NETWORK_ROUTE","CREATE_THREAD_NETWORK_ROUTE","UPDATE_THREAD_NETWORK_ROUTE","DELETE_THREAD_NETWORK_ROUTE","DELETE_MESSAGES_NETWORK_ROUTE","LIST_TRACES_ROUTE","GET_TRACE_ROUTE","SCORE_TRACES_ROUTE","LIST_SCORES_BY_SPAN_ROUTE","LIST_PROCESSOR_PROVIDERS_ROUTE","GET_PROCESSOR_PROVIDER_ROUTE","LIST_PROCESSORS_ROUTE","GET_PROCESSOR_BY_ID_ROUTE","EXECUTE_PROCESSOR_ROUTE","LIST_SCORERS_ROUTE","GET_SCORER_ROUTE","LIST_SCORES_BY_RUN_ID_ROUTE","LIST_SCORES_BY_SCORER_ID_ROUTE","LIST_SCORES_BY_ENTITY_ID_ROUTE","SAVE_SCORE_ROUTE","LIST_STORED_AGENTS_ROUTE","PREVIEW_INSTRUCTIONS_ROUTE","GET_STORED_AGENT_ROUTE","CREATE_STORED_AGENT_ROUTE","UPDATE_STORED_AGENT_ROUTE","DELETE_STORED_AGENT_ROUTE","LIST_AGENT_VERSIONS_ROUTE","CREATE_AGENT_VERSION_ROUTE","COMPARE_AGENT_VERSIONS_ROUTE","GET_AGENT_VERSION_ROUTE","ACTIVATE_AGENT_VERSION_ROUTE","RESTORE_AGENT_VERSION_ROUTE","DELETE_AGENT_VERSION_ROUTE","LIST_STORED_MCP_CLIENTS_ROUTE","GET_STORED_MCP_CLIENT_ROUTE","CREATE_STORED_MCP_CLIENT_ROUTE","UPDATE_STORED_MCP_CLIENT_ROUTE","DELETE_STORED_MCP_CLIENT_ROUTE","LIST_MCP_CLIENT_VERSIONS_ROUTE","CREATE_MCP_CLIENT_VERSION_ROUTE","COMPARE_MCP_CLIENT_VERSIONS_ROUTE","GET_MCP_CLIENT_VERSION_ROUTE","ACTIVATE_MCP_CLIENT_VERSION_ROUTE","RESTORE_MCP_CLIENT_VERSION_ROUTE","DELETE_MCP_CLIENT_VERSION_ROUTE","LIST_STORED_PROMPT_BLOCKS_ROUTE","GET_STORED_PROMPT_BLOCK_ROUTE","CREATE_STORED_PROMPT_BLOCK_ROUTE","UPDATE_STORED_PROMPT_BLOCK_ROUTE","DELETE_STORED_PROMPT_BLOCK_ROUTE","LIST_PROMPT_BLOCK_VERSIONS_ROUTE","CREATE_PROMPT_BLOCK_VERSION_ROUTE","COMPARE_PROMPT_BLOCK_VERSIONS_ROUTE","GET_PROMPT_BLOCK_VERSION_ROUTE","ACTIVATE_PROMPT_BLOCK_VERSION_ROUTE","RESTORE_PROMPT_BLOCK_VERSION_ROUTE","DELETE_PROMPT_BLOCK_VERSION_ROUTE","LIST_STORED_SCORERS_ROUTE","GET_STORED_SCORER_ROUTE","CREATE_STORED_SCORER_ROUTE","UPDATE_STORED_SCORER_ROUTE","DELETE_STORED_SCORER_ROUTE","LIST_SCORER_VERSIONS_ROUTE","CREATE_SCORER_VERSION_ROUTE","COMPARE_SCORER_VERSIONS_ROUTE","GET_SCORER_VERSION_ROUTE","ACTIVATE_SCORER_VERSION_ROUTE","RESTORE_SCORER_VERSION_ROUTE","DELETE_SCORER_VERSION_ROUTE","LIST_STORED_SKILLS_ROUTE","GET_STORED_SKILL_ROUTE","CREATE_STORED_SKILL_ROUTE","UPDATE_STORED_SKILL_ROUTE","DELETE_STORED_SKILL_ROUTE","PUBLISH_STORED_SKILL_ROUTE","LIST_STORED_WORKSPACES_ROUTE","GET_STORED_WORKSPACE_ROUTE","CREATE_STORED_WORKSPACE_ROUTE","UPDATE_STORED_WORKSPACE_ROUTE","DELETE_STORED_WORKSPACE_ROUTE","GET_SYSTEM_PACKAGES_ROUTE","LIST_TOOL_PROVIDERS_ROUTE","LIST_TOOL_PROVIDER_TOOLKITS_ROUTE","LIST_TOOL_PROVIDER_TOOLS_ROUTE","GET_TOOL_PROVIDER_TOOL_SCHEMA_ROUTE","LIST_TOOLS_ROUTE","GET_TOOL_BY_ID_ROUTE","EXECUTE_TOOL_ROUTE","UPSERT_VECTORS_ROUTE","CREATE_INDEX_ROUTE","QUERY_VECTORS_ROUTE","LIST_INDEXES_ROUTE","DESCRIBE_INDEX_ROUTE","DELETE_INDEX_ROUTE","LIST_VECTORS_ROUTE","LIST_EMBEDDERS_ROUTE","LIST_WORKFLOWS_ROUTE","GET_WORKFLOW_BY_ID_ROUTE","LIST_WORKFLOW_RUNS_ROUTE","GET_WORKFLOW_RUN_BY_ID_ROUTE","DELETE_WORKFLOW_RUN_BY_ID_ROUTE","CREATE_WORKFLOW_RUN_ROUTE","STREAM_WORKFLOW_ROUTE","RESUME_STREAM_WORKFLOW_ROUTE","START_ASYNC_WORKFLOW_ROUTE","START_WORKFLOW_RUN_ROUTE","OBSERVE_STREAM_WORKFLOW_ROUTE","RESUME_ASYNC_WORKFLOW_ROUTE","RESUME_WORKFLOW_ROUTE","CANCEL_WORKFLOW_RUN_ROUTE","TIME_TRAVEL_WORKFLOW_ROUTE","TIME_TRAVEL_ASYNC_WORKFLOW_ROUTE","TIME_TRAVEL_STREAM_WORKFLOW_ROUTE","RESTART_WORKFLOW_ROUTE","RESTART_ASYNC_WORKFLOW_ROUTE","RESTART_ALL_ACTIVE_WORKFLOW_RUNS_ROUTE","RESTART_ALL_ACTIVE_WORKFLOW_RUNS_ASYNC_ROUTE","LIST_WORKSPACES_ROUTE","GET_WORKSPACE_ROUTE","WORKSPACE_FS_ROUTES","WORKSPACE_SEARCH_ROUTES","WORKSPACE_SKILLS_ROUTES","WORKSPACE_SKILLS_SH_ROUTES","MastraServerBase","normalizeRoutePath","requestContext","RequestContext","isDevPlaygroundRequest","canAccessPublicly","checkRules","defaultAuthConfig","Hono","generateOpenAPIDocument","convertCustomRoutesToOpenAPIPaths"],"mappings":"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","file":"index.cjs","sourcesContent":["import { GET_AGENT_CARD_ROUTE, AGENT_EXECUTION_ROUTE } from '../../handlers/a2a';\nimport type { ServerRoute } from '.';\n\nexport const A2A_ROUTES: ServerRoute<any, any, any>[] = [GET_AGENT_CARD_ROUTE, AGENT_EXECUTION_ROUTE];\n","import {\n  LIST_AGENT_BUILDER_ACTIONS_ROUTE,\n  GET_AGENT_BUILDER_ACTION_BY_ID_ROUTE,\n  LIST_AGENT_BUILDER_ACTION_RUNS_ROUTE,\n  GET_AGENT_BUILDER_ACTION_RUN_BY_ID_ROUTE,\n  CREATE_AGENT_BUILDER_ACTION_RUN_ROUTE,\n  STREAM_AGENT_BUILDER_ACTION_ROUTE,\n  START_ASYNC_AGENT_BUILDER_ACTION_ROUTE,\n  START_AGENT_BUILDER_ACTION_RUN_ROUTE,\n  OBSERVE_STREAM_AGENT_BUILDER_ACTION_ROUTE,\n  RESUME_ASYNC_AGENT_BUILDER_ACTION_ROUTE,\n  RESUME_AGENT_BUILDER_ACTION_ROUTE,\n  RESUME_STREAM_AGENT_BUILDER_ACTION_ROUTE,\n  CANCEL_AGENT_BUILDER_ACTION_RUN_ROUTE,\n} from '../../handlers/agent-builder';\nimport type { ServerRoute } from '.';\n\nexport const AGENT_BUILDER_ROUTES: ServerRoute<any, any, any>[] = [\n  LIST_AGENT_BUILDER_ACTIONS_ROUTE,\n  GET_AGENT_BUILDER_ACTION_BY_ID_ROUTE,\n  LIST_AGENT_BUILDER_ACTION_RUNS_ROUTE,\n  GET_AGENT_BUILDER_ACTION_RUN_BY_ID_ROUTE,\n  CREATE_AGENT_BUILDER_ACTION_RUN_ROUTE,\n  STREAM_AGENT_BUILDER_ACTION_ROUTE,\n  START_ASYNC_AGENT_BUILDER_ACTION_ROUTE,\n  START_AGENT_BUILDER_ACTION_RUN_ROUTE,\n  OBSERVE_STREAM_AGENT_BUILDER_ACTION_ROUTE,\n  RESUME_ASYNC_AGENT_BUILDER_ACTION_ROUTE,\n  RESUME_AGENT_BUILDER_ACTION_ROUTE,\n  RESUME_STREAM_AGENT_BUILDER_ACTION_ROUTE,\n  CANCEL_AGENT_BUILDER_ACTION_RUN_ROUTE,\n];\n","import {\n  // Agent route objects\n  LIST_AGENTS_ROUTE,\n  GET_AGENT_BY_ID_ROUTE,\n  CLONE_AGENT_ROUTE,\n  GENERATE_AGENT_ROUTE,\n  GENERATE_AGENT_VNEXT_ROUTE,\n  STREAM_GENERATE_ROUTE,\n  STREAM_GENERATE_VNEXT_DEPRECATED_ROUTE,\n  GET_PROVIDERS_ROUTE,\n  APPROVE_TOOL_CALL_ROUTE,\n  DECLINE_TOOL_CALL_ROUTE,\n  APPROVE_TOOL_CALL_GENERATE_ROUTE,\n  DECLINE_TOOL_CALL_GENERATE_ROUTE,\n  STREAM_NETWORK_ROUTE,\n  UPDATE_AGENT_MODEL_ROUTE,\n  RESET_AGENT_MODEL_ROUTE,\n  REORDER_AGENT_MODEL_LIST_ROUTE,\n  UPDATE_AGENT_MODEL_IN_MODEL_LIST_ROUTE,\n  ENHANCE_INSTRUCTIONS_ROUTE,\n  STREAM_VNEXT_DEPRECATED_ROUTE,\n  STREAM_UI_MESSAGE_VNEXT_DEPRECATED_ROUTE,\n  STREAM_UI_MESSAGE_DEPRECATED_ROUTE,\n  APPROVE_NETWORK_TOOL_CALL_ROUTE,\n  DECLINE_NETWORK_TOOL_CALL_ROUTE,\n  GET_AGENT_SKILL_ROUTE,\n} from '../../handlers/agents';\nimport { GET_AGENT_TOOL_ROUTE, EXECUTE_AGENT_TOOL_ROUTE } from '../../handlers/tools';\nimport {\n  GET_SPEAKERS_ROUTE,\n  GET_SPEAKERS_DEPRECATED_ROUTE,\n  GENERATE_SPEECH_ROUTE,\n  GENERATE_SPEECH_DEPRECATED_ROUTE,\n  TRANSCRIBE_SPEECH_ROUTE,\n  TRANSCRIBE_SPEECH_DEPRECATED_ROUTE,\n  GET_LISTENER_ROUTE,\n} from '../../handlers/voice';\nimport type { ServerRoute } from '.';\n\nexport const AGENTS_ROUTES: ServerRoute<any, any, any>[] = [\n  // ============================================================================\n  // Agent Core Routes\n  // ============================================================================\n  LIST_AGENTS_ROUTE,\n  GET_PROVIDERS_ROUTE,\n  GET_AGENT_BY_ID_ROUTE,\n  CLONE_AGENT_ROUTE,\n\n  // ============================================================================\n  // Voice Routes\n  // ============================================================================\n  GET_SPEAKERS_ROUTE,\n  GET_SPEAKERS_DEPRECATED_ROUTE,\n\n  // ============================================================================\n  // Agent Execution Routes\n  // ============================================================================\n  GENERATE_AGENT_ROUTE,\n  GENERATE_AGENT_VNEXT_ROUTE,\n  STREAM_GENERATE_ROUTE,\n  STREAM_GENERATE_VNEXT_DEPRECATED_ROUTE,\n\n  // ============================================================================\n  // Tool Routes\n  // ============================================================================\n  EXECUTE_AGENT_TOOL_ROUTE,\n  APPROVE_TOOL_CALL_ROUTE,\n  DECLINE_TOOL_CALL_ROUTE,\n  APPROVE_TOOL_CALL_GENERATE_ROUTE,\n  DECLINE_TOOL_CALL_GENERATE_ROUTE,\n  APPROVE_NETWORK_TOOL_CALL_ROUTE,\n  DECLINE_NETWORK_TOOL_CALL_ROUTE,\n\n  // ============================================================================\n  // Network Routes\n  // ============================================================================\n  STREAM_NETWORK_ROUTE,\n\n  // ============================================================================\n  // Model Management Routes\n  // ============================================================================\n  UPDATE_AGENT_MODEL_ROUTE,\n  RESET_AGENT_MODEL_ROUTE,\n  REORDER_AGENT_MODEL_LIST_ROUTE,\n  UPDATE_AGENT_MODEL_IN_MODEL_LIST_ROUTE,\n\n  // ============================================================================\n  // Instruction Enhancement Routes\n  // ============================================================================\n  ENHANCE_INSTRUCTIONS_ROUTE,\n\n  // ============================================================================\n  // Agent Tool Routes\n  // ============================================================================\n  GET_AGENT_TOOL_ROUTE,\n\n  // ============================================================================\n  // Agent Skill Routes\n  // ============================================================================\n  GET_AGENT_SKILL_ROUTE,\n\n  // ============================================================================\n  // Voice/Speech Routes\n  // ============================================================================\n  GENERATE_SPEECH_ROUTE,\n  GENERATE_SPEECH_DEPRECATED_ROUTE,\n  TRANSCRIBE_SPEECH_ROUTE,\n  TRANSCRIBE_SPEECH_DEPRECATED_ROUTE,\n  GET_LISTENER_ROUTE,\n\n  // ============================================================================\n  // Deprecated Routes\n  // ============================================================================\n  STREAM_VNEXT_DEPRECATED_ROUTE,\n  STREAM_UI_MESSAGE_VNEXT_DEPRECATED_ROUTE,\n  STREAM_UI_MESSAGE_DEPRECATED_ROUTE,\n];\n","import {\n  LIST_DATASETS_ROUTE,\n  CREATE_DATASET_ROUTE,\n  GET_DATASET_ROUTE,\n  UPDATE_DATASET_ROUTE,\n  DELETE_DATASET_ROUTE,\n  LIST_ITEMS_ROUTE,\n  ADD_ITEM_ROUTE,\n  GET_ITEM_ROUTE,\n  UPDATE_ITEM_ROUTE,\n  DELETE_ITEM_ROUTE,\n  LIST_EXPERIMENTS_ROUTE,\n  TRIGGER_EXPERIMENT_ROUTE,\n  GET_EXPERIMENT_ROUTE,\n  LIST_EXPERIMENT_RESULTS_ROUTE,\n  COMPARE_EXPERIMENTS_ROUTE,\n  LIST_DATASET_VERSIONS_ROUTE,\n  LIST_ITEM_VERSIONS_ROUTE,\n  GET_ITEM_VERSION_ROUTE,\n  BATCH_INSERT_ITEMS_ROUTE,\n  BATCH_DELETE_ITEMS_ROUTE,\n} from '../../handlers/datasets';\nimport type { ServerRoute } from '.';\n\nexport const DATASETS_ROUTES: ServerRoute<any, any, any>[] = [\n  // Dataset CRUD\n  LIST_DATASETS_ROUTE,\n  CREATE_DATASET_ROUTE,\n  GET_DATASET_ROUTE,\n  UPDATE_DATASET_ROUTE,\n  DELETE_DATASET_ROUTE,\n  // Item list and add\n  LIST_ITEMS_ROUTE,\n  ADD_ITEM_ROUTE,\n  // Batch operations - MUST come before item-specific routes to avoid /items/batch matching /items/:itemId\n  BATCH_INSERT_ITEMS_ROUTE,\n  BATCH_DELETE_ITEMS_ROUTE,\n  // Item-specific CRUD (uses :itemId param)\n  GET_ITEM_ROUTE,\n  UPDATE_ITEM_ROUTE,\n  DELETE_ITEM_ROUTE,\n  // Version operations\n  LIST_DATASET_VERSIONS_ROUTE,\n  LIST_ITEM_VERSIONS_ROUTE,\n  GET_ITEM_VERSION_ROUTE,\n  // Experiment operations\n  LIST_EXPERIMENTS_ROUTE,\n  TRIGGER_EXPERIMENT_ROUTE,\n  GET_EXPERIMENT_ROUTE,\n  LIST_EXPERIMENT_RESULTS_ROUTE,\n  // Analytics\n  COMPARE_EXPERIMENTS_ROUTE,\n];\n","/**\n * Legacy routes that are deprecated but still exist in deployer for backward compatibility.\n * These routes should not be used in new code and will be removed in a future version.\n */\n\nimport {\n  STREAM_LEGACY_AGENT_BUILDER_ACTION_ROUTE,\n  OBSERVE_STREAM_LEGACY_AGENT_BUILDER_ACTION_ROUTE,\n} from '../../handlers/agent-builder';\nimport { GENERATE_LEGACY_ROUTE, STREAM_GENERATE_LEGACY_ROUTE } from '../../handlers/agents';\nimport { STREAM_LEGACY_WORKFLOW_ROUTE, OBSERVE_STREAM_LEGACY_WORKFLOW_ROUTE } from '../../handlers/workflows';\nimport type { ServerRoute } from '.';\n\nexport const LEGACY_ROUTES: ServerRoute<any, any, any>[] = [\n  // ============================================================================\n  // Legacy Agent Routes\n  // ============================================================================\n  GENERATE_LEGACY_ROUTE,\n  STREAM_GENERATE_LEGACY_ROUTE,\n\n  // ============================================================================\n  // Legacy Workflow Routes\n  // ============================================================================\n  STREAM_LEGACY_WORKFLOW_ROUTE,\n  OBSERVE_STREAM_LEGACY_WORKFLOW_ROUTE,\n\n  // ============================================================================\n  // Legacy Agent Builder Routes\n  // ============================================================================\n  STREAM_LEGACY_AGENT_BUILDER_ACTION_ROUTE,\n  OBSERVE_STREAM_LEGACY_AGENT_BUILDER_ACTION_ROUTE,\n];\n","import { LIST_LOG_TRANSPORTS_ROUTE, LIST_LOGS_ROUTE, LIST_LOGS_BY_RUN_ID_ROUTE } from '../../handlers/logs';\nimport type { ServerRoute } from '.';\n\nexport const LOGS_ROUTES: ServerRoute<any, any, any>[] = [\n  LIST_LOG_TRANSPORTS_ROUTE,\n  LIST_LOGS_ROUTE,\n  LIST_LOGS_BY_RUN_ID_ROUTE,\n];\n","import {\n  LIST_MCP_SERVERS_ROUTE,\n  GET_MCP_SERVER_DETAIL_ROUTE,\n  LIST_MCP_SERVER_TOOLS_ROUTE,\n  GET_MCP_SERVER_TOOL_DETAIL_ROUTE,\n  EXECUTE_MCP_SERVER_TOOL_ROUTE,\n  MCP_HTTP_TRANSPORT_ROUTE,\n  MCP_SSE_TRANSPORT_ROUTE,\n  MCP_SSE_MESSAGES_ROUTE,\n} from '../../handlers/mcp';\nimport type { ServerRoute } from '.';\n\n/**\n * MCP Routes\n *\n * Registry routes provide access to the MCP server registry and tools.\n * Transport routes handle the MCP protocol communication (HTTP and SSE).\n */\nexport const MCP_ROUTES: ServerRoute<any, any, any>[] = [\n  // ============================================================================\n  // MCP Server Registry Routes\n  // ============================================================================\n  LIST_MCP_SERVERS_ROUTE,\n  GET_MCP_SERVER_DETAIL_ROUTE,\n\n  // ============================================================================\n  // MCP Server Tool Routes\n  // ============================================================================\n  LIST_MCP_SERVER_TOOLS_ROUTE,\n  GET_MCP_SERVER_TOOL_DETAIL_ROUTE,\n  EXECUTE_MCP_SERVER_TOOL_ROUTE,\n\n  // ============================================================================\n  // MCP Transport Routes (handled by adapters)\n  // ============================================================================\n  MCP_HTTP_TRANSPORT_ROUTE,\n  MCP_SSE_TRANSPORT_ROUTE,\n  MCP_SSE_MESSAGES_ROUTE,\n];\n","import {\n  GET_MEMORY_STATUS_ROUTE,\n  GET_MEMORY_CONFIG_ROUTE,\n  GET_OBSERVATIONAL_MEMORY_ROUTE,\n  AWAIT_BUFFER_STATUS_ROUTE,\n  LIST_THREADS_ROUTE,\n  GET_THREAD_BY_ID_ROUTE,\n  LIST_MESSAGES_ROUTE,\n  GET_WORKING_MEMORY_ROUTE,\n  SAVE_MESSAGES_ROUTE,\n  CREATE_THREAD_ROUTE,\n  UPDATE_THREAD_ROUTE,\n  DELETE_THREAD_ROUTE,\n  CLONE_THREAD_ROUTE,\n  UPDATE_WORKING_MEMORY_ROUTE,\n  DELETE_MESSAGES_ROUTE,\n  SEARCH_MEMORY_ROUTE,\n  GET_MEMORY_STATUS_NETWORK_ROUTE,\n  LIST_THREADS_NETWORK_ROUTE,\n  GET_THREAD_BY_ID_NETWORK_ROUTE,\n  LIST_MESSAGES_NETWORK_ROUTE,\n  SAVE_MESSAGES_NETWORK_ROUTE,\n  CREATE_THREAD_NETWORK_ROUTE,\n  UPDATE_THREAD_NETWORK_ROUTE,\n  DELETE_THREAD_NETWORK_ROUTE,\n  DELETE_MESSAGES_NETWORK_ROUTE,\n} from '../../handlers/memory';\nimport type { ServerRoute } from '.';\n\nexport const MEMORY_ROUTES: ServerRoute<any, any, any>[] = [\n  GET_MEMORY_STATUS_ROUTE,\n  GET_MEMORY_CONFIG_ROUTE,\n  GET_OBSERVATIONAL_MEMORY_ROUTE,\n  AWAIT_BUFFER_STATUS_ROUTE,\n  LIST_THREADS_ROUTE,\n  GET_THREAD_BY_ID_ROUTE,\n  LIST_MESSAGES_ROUTE,\n  GET_WORKING_MEMORY_ROUTE,\n  SAVE_MESSAGES_ROUTE,\n  CREATE_THREAD_ROUTE,\n  UPDATE_THREAD_ROUTE,\n  DELETE_THREAD_ROUTE,\n  CLONE_THREAD_ROUTE,\n  UPDATE_WORKING_MEMORY_ROUTE,\n  DELETE_MESSAGES_ROUTE,\n  SEARCH_MEMORY_ROUTE,\n  GET_MEMORY_STATUS_NETWORK_ROUTE,\n  LIST_THREADS_NETWORK_ROUTE,\n  GET_THREAD_BY_ID_NETWORK_ROUTE,\n  LIST_MESSAGES_NETWORK_ROUTE,\n  SAVE_MESSAGES_NETWORK_ROUTE,\n  CREATE_THREAD_NETWORK_ROUTE,\n  UPDATE_THREAD_NETWORK_ROUTE,\n  DELETE_THREAD_NETWORK_ROUTE,\n  DELETE_MESSAGES_NETWORK_ROUTE,\n];\n","import {\n  LIST_TRACES_ROUTE,\n  GET_TRACE_ROUTE,\n  SCORE_TRACES_ROUTE,\n  LIST_SCORES_BY_SPAN_ROUTE,\n} from '../../handlers/observability';\nimport type { ServerRoute } from '.';\n\nexport const OBSERVABILITY_ROUTES: ServerRoute<any, any, any>[] = [\n  LIST_TRACES_ROUTE,\n  GET_TRACE_ROUTE,\n  SCORE_TRACES_ROUTE,\n  LIST_SCORES_BY_SPAN_ROUTE,\n];\n","import { LIST_PROCESSOR_PROVIDERS_ROUTE, GET_PROCESSOR_PROVIDER_ROUTE } from '../../handlers/processor-providers';\nimport type { ServerRoute } from '.';\n\nexport const PROCESSOR_PROVIDER_ROUTES: ServerRoute<any, any, any>[] = [\n  LIST_PROCESSOR_PROVIDERS_ROUTE,\n  GET_PROCESSOR_PROVIDER_ROUTE,\n];\n","import { LIST_PROCESSORS_ROUTE, GET_PROCESSOR_BY_ID_ROUTE, EXECUTE_PROCESSOR_ROUTE } from '../../handlers/processors';\nimport type { ServerRoute } from '.';\n\nexport const PROCESSORS_ROUTES: ServerRoute<any, any, any>[] = [\n  LIST_PROCESSORS_ROUTE,\n  GET_PROCESSOR_BY_ID_ROUTE,\n  EXECUTE_PROCESSOR_ROUTE,\n];\n","import {\n  LIST_SCORERS_ROUTE,\n  GET_SCORER_ROUTE,\n  LIST_SCORES_BY_RUN_ID_ROUTE,\n  LIST_SCORES_BY_SCORER_ID_ROUTE,\n  LIST_SCORES_BY_ENTITY_ID_ROUTE,\n  SAVE_SCORE_ROUTE,\n} from '../../handlers/scores';\nimport type { ServerRoute } from '.';\n\nexport const SCORES_ROUTES: ServerRoute<any, any, any>[] = [\n  LIST_SCORERS_ROUTE,\n  GET_SCORER_ROUTE,\n  LIST_SCORES_BY_RUN_ID_ROUTE,\n  LIST_SCORES_BY_SCORER_ID_ROUTE,\n  LIST_SCORES_BY_ENTITY_ID_ROUTE,\n  SAVE_SCORE_ROUTE,\n];\n","import {\n  LIST_AGENT_VERSIONS_ROUTE,\n  CREATE_AGENT_VERSION_ROUTE,\n  GET_AGENT_VERSION_ROUTE,\n  ACTIVATE_AGENT_VERSION_ROUTE,\n  RESTORE_AGENT_VERSION_ROUTE,\n  DELETE_AGENT_VERSION_ROUTE,\n  COMPARE_AGENT_VERSIONS_ROUTE,\n} from '../../handlers/agent-versions';\nimport {\n  LIST_STORED_AGENTS_ROUTE,\n  GET_STORED_AGENT_ROUTE,\n  CREATE_STORED_AGENT_ROUTE,\n  UPDATE_STORED_AGENT_ROUTE,\n  DELETE_STORED_AGENT_ROUTE,\n  PREVIEW_INSTRUCTIONS_ROUTE,\n} from '../../handlers/stored-agents';\nimport type { ServerRoute } from '.';\n\n/**\n * Routes for stored agents CRUD operations and version management.\n * These routes provide API access to agent configurations stored in the database,\n * enabling dynamic creation and management of agents via Mastra Studio.\n */\nexport const STORED_AGENTS_ROUTES: ServerRoute<any, any, any>[] = [\n  // ============================================================================\n  // Stored Agents CRUD Routes\n  // IMPORTANT: Routes with literal paths (e.g., /preview-instructions) must come\n  // BEFORE routes with path parameters (e.g., /:storedAgentId) to ensure correct matching.\n  // ============================================================================\n  LIST_STORED_AGENTS_ROUTE,\n  PREVIEW_INSTRUCTIONS_ROUTE, // Must be before GET_STORED_AGENT_ROUTE\n  GET_STORED_AGENT_ROUTE,\n  CREATE_STORED_AGENT_ROUTE,\n  UPDATE_STORED_AGENT_ROUTE,\n  DELETE_STORED_AGENT_ROUTE,\n\n  // ============================================================================\n  // Agent Versions Routes\n  // IMPORTANT: Routes with literal paths (e.g., /compare) must come BEFORE\n  // routes with path parameters (e.g., /:versionId) to ensure correct matching.\n  // ============================================================================\n  LIST_AGENT_VERSIONS_ROUTE,\n  CREATE_AGENT_VERSION_ROUTE,\n  COMPARE_AGENT_VERSIONS_ROUTE, // Must be before GET_AGENT_VERSION_ROUTE\n  GET_AGENT_VERSION_ROUTE,\n  ACTIVATE_AGENT_VERSION_ROUTE,\n  RESTORE_AGENT_VERSION_ROUTE,\n  DELETE_AGENT_VERSION_ROUTE,\n];\n","import {\n  LIST_MCP_CLIENT_VERSIONS_ROUTE,\n  CREATE_MCP_CLIENT_VERSION_ROUTE,\n  GET_MCP_CLIENT_VERSION_ROUTE,\n  ACTIVATE_MCP_CLIENT_VERSION_ROUTE,\n  RESTORE_MCP_CLIENT_VERSION_ROUTE,\n  DELETE_MCP_CLIENT_VERSION_ROUTE,\n  COMPARE_MCP_CLIENT_VERSIONS_ROUTE,\n} from '../../handlers/mcp-client-versions';\nimport {\n  LIST_STORED_MCP_CLIENTS_ROUTE,\n  GET_STORED_MCP_CLIENT_ROUTE,\n  CREATE_STORED_MCP_CLIENT_ROUTE,\n  UPDATE_STORED_MCP_CLIENT_ROUTE,\n  DELETE_STORED_MCP_CLIENT_ROUTE,\n} from '../../handlers/stored-mcp-clients';\nimport type { ServerRoute } from '.';\n\nexport const STORED_MCP_CLIENTS_ROUTES: ServerRoute<any, any, any>[] = [\n  // Stored MCP Clients CRUD Routes\n  LIST_STORED_MCP_CLIENTS_ROUTE,\n  GET_STORED_MCP_CLIENT_ROUTE,\n  CREATE_STORED_MCP_CLIENT_ROUTE,\n  UPDATE_STORED_MCP_CLIENT_ROUTE,\n  DELETE_STORED_MCP_CLIENT_ROUTE,\n\n  // MCP Client Versions Routes\n  // IMPORTANT: Routes with literal paths (e.g., /compare) must come BEFORE\n  // routes with path parameters (e.g., /:versionId) to ensure correct matching.\n  LIST_MCP_CLIENT_VERSIONS_ROUTE,\n  CREATE_MCP_CLIENT_VERSION_ROUTE,\n  COMPARE_MCP_CLIENT_VERSIONS_ROUTE,\n  GET_MCP_CLIENT_VERSION_ROUTE,\n  ACTIVATE_MCP_CLIENT_VERSION_ROUTE,\n  RESTORE_MCP_CLIENT_VERSION_ROUTE,\n  DELETE_MCP_CLIENT_VERSION_ROUTE,\n];\n","import {\n  LIST_PROMPT_BLOCK_VERSIONS_ROUTE,\n  CREATE_PROMPT_BLOCK_VERSION_ROUTE,\n  GET_PROMPT_BLOCK_VERSION_ROUTE,\n  ACTIVATE_PROMPT_BLOCK_VERSION_ROUTE,\n  RESTORE_PROMPT_BLOCK_VERSION_ROUTE,\n  DELETE_PROMPT_BLOCK_VERSION_ROUTE,\n  COMPARE_PROMPT_BLOCK_VERSIONS_ROUTE,\n} from '../../handlers/prompt-block-versions';\nimport {\n  LIST_STORED_PROMPT_BLOCKS_ROUTE,\n  GET_STORED_PROMPT_BLOCK_ROUTE,\n  CREATE_STORED_PROMPT_BLOCK_ROUTE,\n  UPDATE_STORED_PROMPT_BLOCK_ROUTE,\n  DELETE_STORED_PROMPT_BLOCK_ROUTE,\n} from '../../handlers/stored-prompt-blocks';\nimport type { ServerRoute } from '.';\n\nexport const STORED_PROMPT_BLOCKS_ROUTES: ServerRoute<any, any, any>[] = [\n  // Stored Prompt Blocks CRUD Routes\n  LIST_STORED_PROMPT_BLOCKS_ROUTE,\n  GET_STORED_PROMPT_BLOCK_ROUTE,\n  CREATE_STORED_PROMPT_BLOCK_ROUTE,\n  UPDATE_STORED_PROMPT_BLOCK_ROUTE,\n  DELETE_STORED_PROMPT_BLOCK_ROUTE,\n\n  // Prompt Block Versions Routes\n  // IMPORTANT: Routes with literal paths (e.g., /compare) must come BEFORE\n  // routes with path parameters (e.g., /:versionId) to ensure correct matching.\n  LIST_PROMPT_BLOCK_VERSIONS_ROUTE,\n  CREATE_PROMPT_BLOCK_VERSION_ROUTE,\n  COMPARE_PROMPT_BLOCK_VERSIONS_ROUTE,\n  GET_PROMPT_BLOCK_VERSION_ROUTE,\n  ACTIVATE_PROMPT_BLOCK_VERSION_ROUTE,\n  RESTORE_PROMPT_BLOCK_VERSION_ROUTE,\n  DELETE_PROMPT_BLOCK_VERSION_ROUTE,\n];\n","import {\n  LIST_SCORER_VERSIONS_ROUTE,\n  CREATE_SCORER_VERSION_ROUTE,\n  GET_SCORER_VERSION_ROUTE,\n  ACTIVATE_SCORER_VERSION_ROUTE,\n  RESTORE_SCORER_VERSION_ROUTE,\n  DELETE_SCORER_VERSION_ROUTE,\n  COMPARE_SCORER_VERSIONS_ROUTE,\n} from '../../handlers/scorer-versions';\nimport {\n  LIST_STORED_SCORERS_ROUTE,\n  GET_STORED_SCORER_ROUTE,\n  CREATE_STORED_SCORER_ROUTE,\n  UPDATE_STORED_SCORER_ROUTE,\n  DELETE_STORED_SCORER_ROUTE,\n} from '../../handlers/stored-scorers';\nimport type { ServerRoute } from '.';\n\nexport const STORED_SCORERS_ROUTES: ServerRoute<any, any, any>[] = [\n  // Stored Scorers CRUD Routes\n  LIST_STORED_SCORERS_ROUTE,\n  GET_STORED_SCORER_ROUTE,\n  CREATE_STORED_SCORER_ROUTE,\n  UPDATE_STORED_SCORER_ROUTE,\n  DELETE_STORED_SCORER_ROUTE,\n\n  // Scorer Versions Routes\n  // IMPORTANT: Routes with literal paths (e.g., /compare) must come BEFORE\n  // routes with path parameters (e.g., /:versionId) to ensure correct matching.\n  LIST_SCORER_VERSIONS_ROUTE,\n  CREATE_SCORER_VERSION_ROUTE,\n  COMPARE_SCORER_VERSIONS_ROUTE,\n  GET_SCORER_VERSION_ROUTE,\n  ACTIVATE_SCORER_VERSION_ROUTE,\n  RESTORE_SCORER_VERSION_ROUTE,\n  DELETE_SCORER_VERSION_ROUTE,\n];\n","import {\n  LIST_STORED_SKILLS_ROUTE,\n  GET_STORED_SKILL_ROUTE,\n  CREATE_STORED_SKILL_ROUTE,\n  UPDATE_STORED_SKILL_ROUTE,\n  DELETE_STORED_SKILL_ROUTE,\n  PUBLISH_STORED_SKILL_ROUTE,\n} from '../../handlers/stored-skills';\nimport type { ServerRoute } from '.';\n\nexport const STORED_SKILLS_ROUTES: ServerRoute<any, any, any>[] = [\n  // Stored Skills CRUD Routes\n  LIST_STORED_SKILLS_ROUTE,\n  GET_STORED_SKILL_ROUTE,\n  CREATE_STORED_SKILL_ROUTE,\n  UPDATE_STORED_SKILL_ROUTE,\n  DELETE_STORED_SKILL_ROUTE,\n  // Publish\n  PUBLISH_STORED_SKILL_ROUTE,\n];\n","import {\n  LIST_STORED_WORKSPACES_ROUTE,\n  GET_STORED_WORKSPACE_ROUTE,\n  CREATE_STORED_WORKSPACE_ROUTE,\n  UPDATE_STORED_WORKSPACE_ROUTE,\n  DELETE_STORED_WORKSPACE_ROUTE,\n} from '../../handlers/stored-workspaces';\nimport type { ServerRoute } from '.';\n\nexport const STORED_WORKSPACES_ROUTES: ServerRoute<any, any, any>[] = [\n  // Stored Workspaces CRUD Routes\n  LIST_STORED_WORKSPACES_ROUTE,\n  GET_STORED_WORKSPACE_ROUTE,\n  CREATE_STORED_WORKSPACE_ROUTE,\n  UPDATE_STORED_WORKSPACE_ROUTE,\n  DELETE_STORED_WORKSPACE_ROUTE,\n];\n","import { GET_SYSTEM_PACKAGES_ROUTE } from '../../handlers/system';\n\n/**\n * System Routes\n *\n * Routes for system information and diagnostics.\n */\nexport const SYSTEM_ROUTES = [GET_SYSTEM_PACKAGES_ROUTE] as const;\n","import {\n  LIST_TOOL_PROVIDERS_ROUTE,\n  LIST_TOOL_PROVIDER_TOOLKITS_ROUTE,\n  LIST_TOOL_PROVIDER_TOOLS_ROUTE,\n  GET_TOOL_PROVIDER_TOOL_SCHEMA_ROUTE,\n} from '../../handlers/tool-providers';\nimport type { ServerRoute } from '.';\n\nexport const TOOL_PROVIDER_ROUTES: ServerRoute<any, any, any>[] = [\n  LIST_TOOL_PROVIDERS_ROUTE,\n  LIST_TOOL_PROVIDER_TOOLKITS_ROUTE,\n  LIST_TOOL_PROVIDER_TOOLS_ROUTE,\n  GET_TOOL_PROVIDER_TOOL_SCHEMA_ROUTE,\n];\n","import { LIST_TOOLS_ROUTE, GET_TOOL_BY_ID_ROUTE, EXECUTE_TOOL_ROUTE } from '../../handlers/tools';\nimport type { ServerRoute } from '.';\n\nexport const TOOLS_ROUTES: ServerRoute<any, any, any>[] = [LIST_TOOLS_ROUTE, GET_TOOL_BY_ID_ROUTE, EXECUTE_TOOL_ROUTE];\n","import {\n  UPSERT_VECTORS_ROUTE,\n  CREATE_INDEX_ROUTE,\n  QUERY_VECTORS_ROUTE,\n  LIST_INDEXES_ROUTE,\n  DESCRIBE_INDEX_ROUTE,\n  DELETE_INDEX_ROUTE,\n  LIST_VECTORS_ROUTE,\n  LIST_EMBEDDERS_ROUTE,\n} from '../../handlers/vector';\nimport type { ServerRoute } from '.';\n\nexport const VECTORS_ROUTES: ServerRoute<any, any, any>[] = [\n  UPSERT_VECTORS_ROUTE,\n  CREATE_INDEX_ROUTE,\n  QUERY_VECTORS_ROUTE,\n  LIST_INDEXES_ROUTE,\n  DESCRIBE_INDEX_ROUTE,\n  DELETE_INDEX_ROUTE,\n  LIST_VECTORS_ROUTE,\n  LIST_EMBEDDERS_ROUTE,\n];\n","import {\n  LIST_WORKFLOWS_ROUTE,\n  GET_WORKFLOW_BY_ID_ROUTE,\n  LIST_WORKFLOW_RUNS_ROUTE,\n  GET_WORKFLOW_RUN_BY_ID_ROUTE,\n  CREATE_WORKFLOW_RUN_ROUTE,\n  STREAM_WORKFLOW_ROUTE,\n  RESUME_STREAM_WORKFLOW_ROUTE,\n  START_ASYNC_WORKFLOW_ROUTE,\n  START_WORKFLOW_RUN_ROUTE,\n  OBSERVE_STREAM_WORKFLOW_ROUTE,\n  RESUME_ASYNC_WORKFLOW_ROUTE,\n  RESUME_WORKFLOW_ROUTE,\n  CANCEL_WORKFLOW_RUN_ROUTE,\n  TIME_TRAVEL_WORKFLOW_ROUTE,\n  TIME_TRAVEL_STREAM_WORKFLOW_ROUTE,\n  RESTART_WORKFLOW_ROUTE,\n  RESTART_ASYNC_WORKFLOW_ROUTE,\n  RESTART_ALL_ACTIVE_WORKFLOW_RUNS_ROUTE,\n  RESTART_ALL_ACTIVE_WORKFLOW_RUNS_ASYNC_ROUTE,\n  TIME_TRAVEL_ASYNC_WORKFLOW_ROUTE,\n  DELETE_WORKFLOW_RUN_BY_ID_ROUTE,\n} from '../../handlers/workflows';\nimport type { ServerRoute } from '.';\n\nexport const WORKFLOWS_ROUTES: ServerRoute<any, any, any>[] = [\n  LIST_WORKFLOWS_ROUTE,\n  GET_WORKFLOW_BY_ID_ROUTE,\n  LIST_WORKFLOW_RUNS_ROUTE,\n  GET_WORKFLOW_RUN_BY_ID_ROUTE,\n  DELETE_WORKFLOW_RUN_BY_ID_ROUTE,\n  CREATE_WORKFLOW_RUN_ROUTE,\n  STREAM_WORKFLOW_ROUTE,\n  RESUME_STREAM_WORKFLOW_ROUTE,\n  START_ASYNC_WORKFLOW_ROUTE,\n  START_WORKFLOW_RUN_ROUTE,\n  OBSERVE_STREAM_WORKFLOW_ROUTE,\n  RESUME_ASYNC_WORKFLOW_ROUTE,\n  RESUME_WORKFLOW_ROUTE,\n  CANCEL_WORKFLOW_RUN_ROUTE,\n  TIME_TRAVEL_WORKFLOW_ROUTE,\n  TIME_TRAVEL_ASYNC_WORKFLOW_ROUTE,\n  TIME_TRAVEL_STREAM_WORKFLOW_ROUTE,\n  RESTART_WORKFLOW_ROUTE,\n  RESTART_ASYNC_WORKFLOW_ROUTE,\n  RESTART_ALL_ACTIVE_WORKFLOW_RUNS_ROUTE,\n  RESTART_ALL_ACTIVE_WORKFLOW_RUNS_ASYNC_ROUTE,\n];\n","/**\n * Workspace Routes\n *\n * All routes for workspace operations under /api/workspaces/*\n */\n\nimport {\n  LIST_WORKSPACES_ROUTE,\n  GET_WORKSPACE_ROUTE,\n  WORKSPACE_FS_ROUTES,\n  WORKSPACE_SEARCH_ROUTES,\n  WORKSPACE_SKILLS_ROUTES,\n  WORKSPACE_SKILLS_SH_ROUTES,\n} from '../../handlers/workspace';\nimport type { ServerRoute } from '.';\n\nexport const WORKSPACE_ROUTES: ServerRoute<any, any, any>[] = [\n  // List all workspaces route (at /api/workspaces)\n  LIST_WORKSPACES_ROUTE,\n\n  // Get workspace route (at /api/workspaces/:workspaceId)\n  GET_WORKSPACE_ROUTE,\n\n  // Filesystem routes (at /api/workspaces/:workspaceId/fs/*)\n  ...WORKSPACE_FS_ROUTES,\n\n  // Search routes (at /api/workspaces/:workspaceId/search, /api/workspaces/:workspaceId/index)\n  ...WORKSPACE_SEARCH_ROUTES,\n\n  // Skills routes (search must come before parameterized routes)\n  ...WORKSPACE_SKILLS_ROUTES,\n\n  // skills.sh proxy routes (at /api/workspaces/:workspaceId/skills-sh/*)\n  ...WORKSPACE_SKILLS_SH_ROUTES,\n];\n","import type { Mastra } from '@mastra/core';\nimport type { ToolsInput } from '@mastra/core/agent';\nimport type { RequestContext } from '@mastra/core/request-context';\nimport type { ApiRoute } from '@mastra/core/server';\nimport type z from 'zod';\nimport type { InMemoryTaskStore } from '../../a2a/store';\nimport { A2A_ROUTES } from './a2a';\nimport { AGENT_BUILDER_ROUTES } from './agent-builder';\nimport { AGENTS_ROUTES } from './agents';\nimport { DATASETS_ROUTES } from './datasets';\nimport { LEGACY_ROUTES } from './legacy';\nimport { LOGS_ROUTES } from './logs';\nimport { MCP_ROUTES } from './mcp';\nimport { MEMORY_ROUTES } from './memory';\nimport { OBSERVABILITY_ROUTES } from './observability';\nimport { PROCESSOR_PROVIDER_ROUTES } from './processor-providers';\nimport { PROCESSORS_ROUTES } from './processors';\nimport { SCORES_ROUTES } from './scorers';\nimport { STORED_AGENTS_ROUTES } from './stored-agents';\nimport { STORED_MCP_CLIENTS_ROUTES } from './stored-mcp-clients';\nimport { STORED_PROMPT_BLOCKS_ROUTES } from './stored-prompt-blocks';\nimport { STORED_SCORERS_ROUTES } from './stored-scorers';\nimport { STORED_SKILLS_ROUTES } from './stored-skills';\nimport { STORED_WORKSPACES_ROUTES } from './stored-workspaces';\nimport type { MastraStreamReturn } from './stream-types';\nimport { SYSTEM_ROUTES } from './system';\nimport { TOOL_PROVIDER_ROUTES } from './tool-providers';\nimport { TOOLS_ROUTES } from './tools';\nimport { VECTORS_ROUTES } from './vectors';\nimport { WORKFLOWS_ROUTES } from './workflows';\nimport { WORKSPACE_ROUTES } from './workspace';\n\n/**\n * Server context fields that are available to route handlers.\n * These are injected by the server adapters (Express, Hono, etc.)\n * Fields other than `mastra` are optional to allow direct handler testing.\n */\nexport type ServerContext = {\n  mastra: Mastra;\n  requestContext: RequestContext;\n  registeredTools?: ToolsInput;\n  taskStore?: InMemoryTaskStore;\n  abortSignal: AbortSignal;\n  /** The route prefix configured for the server (e.g., '/api') */\n  routePrefix?: string;\n};\n\n/**\n * Utility type to infer parameters from Zod schemas.\n * Merges path params, query params, and body params into a single type.\n */\nexport type InferParams<\n  TPathSchema extends z.ZodTypeAny | undefined,\n  TQuerySchema extends z.ZodTypeAny | undefined,\n  TBodySchema extends z.ZodTypeAny | undefined,\n> = (TPathSchema extends z.ZodTypeAny ? z.infer<TPathSchema> : {}) &\n  (TQuerySchema extends z.ZodTypeAny ? z.infer<TQuerySchema> : {}) &\n  (TBodySchema extends z.ZodTypeAny ? z.infer<TBodySchema> : {});\n\n/**\n * All supported response types for server routes.\n * - 'json': Standard JSON response\n * - 'stream': Streaming response (SSE or raw stream)\n * - 'datastream-response': Pre-built Response object for data streams\n * - 'mcp-http': MCP Streamable HTTP transport (handled by adapter)\n * - 'mcp-sse': MCP SSE transport (handled by adapter)\n */\nexport type ResponseType = 'stream' | 'json' | 'datastream-response' | 'mcp-http' | 'mcp-sse';\n\nexport type ServerRouteHandler<\n  TParams = Record<string, unknown>,\n  TResponse = unknown,\n  TResponseType extends ResponseType = 'json',\n> = (\n  params: TParams & ServerContext,\n) => Promise<\n  TResponseType extends 'stream'\n    ? MastraStreamReturn\n    : TResponseType extends 'datastream-response'\n      ? Response\n      : TResponse\n>;\n\nexport type ServerRoute<\n  TParams = Record<string, unknown>,\n  TResponse = unknown,\n  TResponseType extends ResponseType = 'json',\n> = Omit<ApiRoute, 'handler' | 'createHandler'> & {\n  responseType: TResponseType;\n  streamFormat?: 'sse' | 'stream'; // Only used when responseType is 'stream', defaults to 'stream'\n  handler: ServerRouteHandler<TParams, TResponse, TResponseType>;\n  pathParamSchema?: z.ZodSchema;\n  queryParamSchema?: z.ZodSchema;\n  bodySchema?: z.ZodSchema;\n  responseSchema?: z.ZodSchema;\n  openapi?: any; // Auto-generated OpenAPI spec for this route\n  maxBodySize?: number; // Optional route-specific body size limit in bytes\n  deprecated?: boolean; // Flag for deprecated routes (used for route parity, skipped in tests)\n};\n\nexport const SERVER_ROUTES: ServerRoute<any, any, any>[] = [\n  ...AGENTS_ROUTES,\n  ...WORKFLOWS_ROUTES,\n  ...TOOLS_ROUTES,\n  ...PROCESSORS_ROUTES,\n  ...MEMORY_ROUTES,\n  ...SCORES_ROUTES,\n  ...OBSERVABILITY_ROUTES,\n  ...LOGS_ROUTES,\n  ...VECTORS_ROUTES,\n  ...A2A_ROUTES,\n  ...AGENT_BUILDER_ROUTES,\n  ...WORKSPACE_ROUTES,\n  ...LEGACY_ROUTES,\n  ...MCP_ROUTES,\n  ...STORED_AGENTS_ROUTES,\n  ...STORED_MCP_CLIENTS_ROUTES,\n  ...STORED_PROMPT_BLOCKS_ROUTES,\n  ...STORED_SCORERS_ROUTES,\n  ...STORED_WORKSPACES_ROUTES,\n  ...STORED_SKILLS_ROUTES,\n  ...TOOL_PROVIDER_ROUTES,\n  ...PROCESSOR_PROVIDER_ROUTES,\n  ...SYSTEM_ROUTES,\n  ...DATASETS_ROUTES,\n];\n\n// Export route builder and OpenAPI utilities\nexport { createRoute, pickParams, jsonQueryParam, wrapSchemaForQueryParams } from './route-builder';\nexport { generateOpenAPIDocument } from '../openapi-utils';\n","import type { ChunkType } from '@mastra/core/stream';\n\n/**\n * Redacts request data from a v2 format payload.\n * Removes `metadata.request` and `output.steps[].request` from the payload.\n */\nfunction redactV2Payload(payload: Record<string, unknown>): Record<string, unknown> {\n  const redactedPayload = { ...payload };\n\n  // Remove metadata.request\n  if (redactedPayload.metadata && typeof redactedPayload.metadata === 'object') {\n    const { request, ...metadataRest } = redactedPayload.metadata as Record<string, unknown>;\n    redactedPayload.metadata = metadataRest;\n  }\n\n  // Remove request from output.steps[]\n  if (redactedPayload.output && typeof redactedPayload.output === 'object') {\n    const output = { ...(redactedPayload.output as Record<string, unknown>) };\n    if (Array.isArray(output.steps)) {\n      output.steps = output.steps.map((step: Record<string, unknown>) => {\n        if (step && typeof step === 'object') {\n          const { request, ...stepRest } = step;\n          return stepRest;\n        }\n        return step;\n      });\n    }\n    redactedPayload.output = output;\n  }\n\n  return redactedPayload;\n}\n\n/**\n * Redacts sensitive data from stream chunks before they are sent to clients.\n *\n * This function strips out request bodies that may contain sensitive information\n * such as system prompts, tool definitions, API keys, and other configuration data.\n *\n * Handles both v1 (legacy) and v2 stream formats:\n *\n * v1 format (fields at root level):\n * - `step-start.request` - Contains the full LLM request body\n * - `step-finish.request` - Contains the request body\n * - `finish.request` - Contains the request body (if present)\n *\n * v2 format (fields nested in payload):\n * - `step-start.payload.request` - Contains the full LLM request body\n * - `step-finish.payload.metadata.request` - Contains the request metadata\n * - `step-finish.payload.output.steps[].request` - Contains request data for each step\n * - `finish.payload.metadata.request` - Contains the request metadata\n * - `finish.payload.output.steps[].request` - Contains request data for each step\n *\n * @param chunk - The stream chunk to redact\n * @returns A new chunk with sensitive data removed, or the original chunk if no redaction needed\n */\nexport function redactStreamChunk<OUTPUT = undefined>(chunk: ChunkType<OUTPUT>): ChunkType<OUTPUT> {\n  if (!chunk || typeof chunk !== 'object') {\n    return chunk;\n  }\n\n  const typedChunk = chunk as Record<string, unknown>;\n\n  switch (chunk.type) {\n    case 'step-start': {\n      // Check if this is v2 format (has payload) or v1 format (request at root)\n      if ('payload' in typedChunk && typedChunk.payload && typeof typedChunk.payload === 'object') {\n        // v2 format: Remove request from payload\n        const { payload, ...rest } = typedChunk;\n        const { request, ...payloadRest } = payload as Record<string, unknown>;\n        return {\n          ...rest,\n          type: 'step-start',\n          payload: {\n            ...payloadRest,\n            // Keep an empty request object to maintain structure but remove body\n            request: {},\n          },\n        } as ChunkType<OUTPUT>;\n      } else if ('request' in typedChunk) {\n        // v1 format: Remove request at root level\n        const { request, ...rest } = typedChunk;\n        return {\n          ...rest,\n          type: 'step-start',\n          // Keep an empty request object to maintain structure\n          request: {},\n        } as unknown as ChunkType<OUTPUT>;\n      }\n      return chunk;\n    }\n\n    case 'step-finish': {\n      // Check if this is v2 format (has payload) or v1 format (request at root)\n      if ('payload' in typedChunk && typedChunk.payload && typeof typedChunk.payload === 'object') {\n        // v2 format: Remove request from metadata and output.steps[].request\n        const { payload, ...rest } = typedChunk;\n        return {\n          ...rest,\n          type: 'step-finish',\n          payload: redactV2Payload(payload as Record<string, unknown>),\n        } as ChunkType<OUTPUT>;\n      } else if ('request' in typedChunk) {\n        // v1 format: Remove request at root level\n        const { request, ...rest } = typedChunk;\n        return {\n          ...rest,\n          type: 'step-finish',\n        } as unknown as ChunkType<OUTPUT>;\n      }\n      return chunk;\n    }\n\n    case 'finish': {\n      // Check if this is v2 format (has payload) or v1 format (request at root)\n      if ('payload' in typedChunk && typedChunk.payload && typeof typedChunk.payload === 'object') {\n        // v2 format: Remove request from metadata and output.steps[].request\n        const { payload, ...rest } = typedChunk;\n        return {\n          ...rest,\n          type: 'finish',\n          payload: redactV2Payload(payload as Record<string, unknown>),\n        } as ChunkType<OUTPUT>;\n      } else if ('request' in typedChunk) {\n        // v1 format: Remove request at root level\n        const { request, ...rest } = typedChunk;\n        return {\n          ...rest,\n          type: 'finish',\n        } as unknown as ChunkType<OUTPUT>;\n      }\n      return chunk;\n    }\n\n    default:\n      // Other chunk types don't contain sensitive request data\n      return chunk;\n  }\n}\n","import type { ToolsInput } from '@mastra/core/agent';\nimport type { Mastra } from '@mastra/core/mastra';\nimport { RequestContext } from '@mastra/core/request-context';\nimport { MastraServerBase } from '@mastra/core/server';\nimport type { ApiRoute } from '@mastra/core/server';\nimport { Hono } from 'hono';\n\nimport type { InMemoryTaskStore } from '../a2a/store';\nimport { defaultAuthConfig } from '../auth/defaults';\nimport { canAccessPublicly, checkRules, isDevPlaygroundRequest } from '../auth/helpers';\nimport { normalizeRoutePath } from '../utils';\nimport { generateOpenAPIDocument, convertCustomRoutesToOpenAPIPaths } from './openapi-utils';\nimport { SERVER_ROUTES } from './routes';\nimport type { ServerRoute } from './routes';\n\nexport * from './routes';\nexport { redactStreamChunk } from './redact';\n\nexport { WorkflowRegistry, normalizeRoutePath } from '../utils';\n\nexport interface OpenAPIConfig {\n  title?: string;\n  version?: string;\n  description?: string;\n  path?: string;\n}\n\nexport interface BodyLimitOptions {\n  maxSize: number;\n  onError: (error: unknown) => unknown;\n}\n\nexport interface StreamOptions {\n  /**\n   * When true (default), redacts sensitive data from stream chunks\n   * (system prompts, tool definitions, API keys) before sending to clients.\n   *\n   * Set to false to include full request data in stream chunks (useful for\n   * debugging or internal services that need access to this data).\n   *\n   * @default true\n   */\n  redact?: boolean;\n}\n\n/**\n * MCP transport options for configuring MCP HTTP and SSE transports.\n */\nexport interface MCPOptions {\n  /**\n   * When true, runs in stateless mode without session management.\n   * Ideal for serverless environments (Cloudflare Workers, Vercel Edge, etc.)\n   * where you can't maintain persistent connections across requests.\n   *\n   * @default false\n   */\n  serverless?: boolean;\n  /**\n   * Custom session ID generator function.\n   */\n  sessionIdGenerator?: () => string;\n}\n\n/**\n * Query parameter values parsed from HTTP requests.\n * Supports both single values and arrays (for repeated query params like ?tag=a&tag=b).\n */\nexport type QueryParamValue = string | string[];\n\n/**\n * Parsed request parameters returned by getParams().\n */\nexport interface ParsedRequestParams {\n  urlParams: Record<string, string>;\n  queryParams: Record<string, QueryParamValue>;\n  body: unknown;\n  /**\n   * Error that occurred while parsing the request body.\n   * When set, the server should return a 400 Bad Request response.\n   */\n  bodyParseError?: {\n    message: string;\n  };\n}\n\n/**\n * Normalizes query parameters from various HTTP framework formats to a consistent structure.\n * Handles both single string values and arrays (for repeated query params like ?tag=a&tag=b).\n * Reconstructs bracket-notation keys (e.g., `orderBy[field]=createdAt`) into JSON strings\n * so that z.preprocess JSON.parse can handle them.\n * Filters out non-string values that some frameworks may include.\n *\n * @param rawQuery - Raw query parameters from the HTTP framework (may contain strings, arrays, or nested objects)\n * @returns Normalized query parameters as Record<string, string | string[]>\n */\nexport function normalizeQueryParams(rawQuery: Record<string, unknown>): Record<string, QueryParamValue> {\n  const queryParams: Record<string, QueryParamValue> = {};\n  // Collect bracket-notation keys: e.g., \"orderBy[field]\"  parent \"orderBy\", child \"field\"\n  const bracketGroups: Record<string, Record<string, string>> = {};\n\n  for (const [key, value] of Object.entries(rawQuery)) {\n    const bracketMatch = key.match(/^([^[]+)\\[([^\\]]+)\\]$/);\n    if (bracketMatch) {\n      const parent = bracketMatch[1]!;\n      const child = bracketMatch[2]!;\n      const strValue = Array.isArray(value)\n        ? value.filter((v): v is string => typeof v === 'string')[0]\n        : typeof value === 'string'\n          ? value\n          : undefined;\n      if (strValue !== undefined) {\n        if (!bracketGroups[parent]) {\n          bracketGroups[parent] = {};\n        }\n        bracketGroups[parent]![child] = strValue;\n      }\n    } else if (typeof value === 'string') {\n      queryParams[key] = value;\n    } else if (Array.isArray(value)) {\n      // Filter to only string values (some frameworks include nested objects)\n      const stringValues = value.filter((v): v is string => typeof v === 'string');\n      // Convert single-value arrays back to strings for compatibility\n      queryParams[key] = stringValues.length === 1 ? stringValues[0]! : stringValues;\n    }\n  }\n\n  // Merge bracket groups as JSON strings (only if the parent key wasn't already set directly)\n  for (const [parent, children] of Object.entries(bracketGroups)) {\n    if (!(parent in queryParams)) {\n      queryParams[parent] = JSON.stringify(children);\n    }\n  }\n\n  return queryParams;\n}\n\n/**\n * Abstract base class for server adapters that handle HTTP requests.\n *\n * This class extends `MastraServerBase` to inherit app storage functionality\n * and provides the framework for registering routes, middleware, and handling requests.\n *\n * Framework-specific adapters in @mastra/hono and @mastra/express extend this class\n * (both named `MastraServer` in their respective packages) and implement the abstract\n * methods for their specific framework.\n *\n * @template TApp - The type of the server app (e.g., Hono, Express Application)\n * @template TRequest - The type of the request object\n * @template TResponse - The type of the response object\n */\nexport abstract class MastraServer<TApp, TRequest, TResponse> extends MastraServerBase<TApp> {\n  protected mastra: Mastra;\n  protected bodyLimitOptions?: BodyLimitOptions;\n  protected tools?: ToolsInput;\n  protected prefix?: string;\n  protected openapiPath?: string;\n  protected taskStore?: InMemoryTaskStore;\n  protected customRouteAuthConfig?: Map<string, boolean>;\n  protected streamOptions: StreamOptions;\n  protected customApiRoutes?: ApiRoute[];\n  protected mcpOptions?: MCPOptions;\n  private customRouteHandler:\n    | ((request: Request, env?: { requestContext?: RequestContext }) => Promise<Response>)\n    | null = null;\n\n  constructor({\n    app,\n    mastra,\n    bodyLimitOptions,\n    tools,\n    prefix = '/api',\n    openapiPath = '',\n    taskStore,\n    customRouteAuthConfig,\n    streamOptions,\n    customApiRoutes,\n    mcpOptions,\n  }: {\n    app: TApp;\n    mastra: Mastra;\n    bodyLimitOptions?: BodyLimitOptions;\n    tools?: ToolsInput;\n    prefix?: string;\n    openapiPath?: string;\n    taskStore?: InMemoryTaskStore;\n    customRouteAuthConfig?: Map<string, boolean>;\n    streamOptions?: StreamOptions;\n    customApiRoutes?: ApiRoute[];\n    /**\n     * MCP transport options applied to all MCP HTTP and SSE routes.\n     * Individual routes can override these via MCPHttpTransportResult.mcpOptions.\n     */\n    mcpOptions?: MCPOptions;\n  }) {\n    super({ app, name: 'MastraServer' });\n    this.mastra = mastra;\n    this.bodyLimitOptions = bodyLimitOptions;\n    this.tools = tools;\n    this.prefix = normalizeRoutePath(prefix);\n    this.openapiPath = openapiPath;\n    this.taskStore = taskStore;\n    this.customRouteAuthConfig = customRouteAuthConfig;\n    this.streamOptions = { redact: true, ...streamOptions };\n    this.customApiRoutes = customApiRoutes;\n    this.mcpOptions = mcpOptions;\n\n    // Automatically register this adapter with Mastra so getServerApp() works\n    mastra.setMastraServer(this);\n  }\n\n  protected mergeRequestContext({\n    paramsRequestContext,\n    bodyRequestContext,\n  }: {\n    paramsRequestContext?: Record<string, any>;\n    bodyRequestContext?: Record<string, any>;\n  }): RequestContext {\n    const requestContext = new RequestContext();\n    if (bodyRequestContext) {\n      for (const [key, value] of Object.entries(bodyRequestContext)) {\n        requestContext.set(key, value);\n      }\n    }\n    if (paramsRequestContext) {\n      for (const [key, value] of Object.entries(paramsRequestContext)) {\n        requestContext.set(key, value);\n      }\n    }\n    return requestContext;\n  }\n\n  /**\n   * Check if the current request should be authenticated/authorized.\n   * Returns null if auth passes, or an error response if it fails.\n   *\n   * This method encapsulates the complete auth flow:\n   * 1. Check if route requires auth (route.requiresAuth)\n   * 2. Check if it's a dev playground request\n   * 3. Check if path is publicly accessible\n   * 4. Perform authentication (verify token)\n   * 5. Perform authorization (check rules, authorizeUser, authorize)\n   */\n  protected async checkRouteAuth(\n    route: ServerRoute,\n    context: {\n      path: string;\n      method: string;\n      getHeader: (name: string) => string | undefined;\n      getQuery: (name: string) => string | undefined;\n      requestContext: RequestContext;\n    },\n  ): Promise<{ status: number; error: string } | null> {\n    const authConfig = this.mastra.getServer()?.auth;\n\n    // No auth config means no auth required\n    if (!authConfig) {\n      return null;\n    }\n\n    // Check route-level requiresAuth flag first (explicit per-route setting)\n    // Default to true (protected) if not specified for backwards compatibility\n    if (route.requiresAuth === false) {\n      return null; // Route explicitly opts out of auth\n    }\n\n    // Dev playground bypass\n    if (isDevPlaygroundRequest(context.path, context.method, context.getHeader, authConfig)) {\n      return null;\n    }\n\n    // Check if path is publicly accessible via auth config patterns\n    if (canAccessPublicly(context.path, context.method, authConfig)) {\n      return null;\n    }\n\n    // --- Authentication ---\n    const authHeader = context.getHeader('authorization');\n    let token: string | null = authHeader ? authHeader.replace('Bearer ', '') : null;\n\n    if (!token) {\n      token = context.getQuery('apiKey') || null;\n    }\n\n    if (!token) {\n      return { status: 401, error: 'Authentication required' };\n    }\n\n    let user: unknown;\n    try {\n      if (typeof authConfig.authenticateToken === 'function') {\n        // Note: We pass null as request since adapters have different request types\n        // If specific request is needed, authenticateToken can use data from token\n        user = await authConfig.authenticateToken(token, null as any);\n      } else {\n        return { status: 401, error: 'No token verification method configured' };\n      }\n\n      if (!user) {\n        return { status: 401, error: 'Invalid or expired token' };\n      }\n\n      context.requestContext.set('user', user);\n    } catch (err) {\n      this.mastra.getLogger()?.error('Authentication error', {\n        error: err instanceof Error ? { message: err.message, stack: err.stack } : err,\n      });\n      return { status: 401, error: 'Invalid or expired token' };\n    }\n\n    // --- Authorization ---\n\n    // Check authorizeUser (simplified authorization)\n    if ('authorizeUser' in authConfig && typeof authConfig.authorizeUser === 'function') {\n      try {\n        const isAuthorized = await authConfig.authorizeUser(user, null as any);\n        if (!isAuthorized) {\n          return { status: 403, error: 'Access denied' };\n        }\n        return null; // Authorization passed\n      } catch (err) {\n        this.mastra.getLogger()?.error('Authorization error in authorizeUser', {\n          error: err instanceof Error ? { message: err.message, stack: err.stack } : err,\n        });\n        return { status: 500, error: 'Authorization error' };\n      }\n    }\n\n    // Check authorize (path/method-based authorization)\n    if ('authorize' in authConfig && typeof authConfig.authorize === 'function') {\n      try {\n        const isAuthorized = await authConfig.authorize(context.path, context.method, user, null as any);\n        if (!isAuthorized) {\n          return { status: 403, error: 'Access denied' };\n        }\n        return null; // Authorization passed\n      } catch (err) {\n        this.mastra.getLogger()?.error('Authorization error in authorize', {\n          error: err instanceof Error ? { message: err.message, stack: err.stack } : err,\n          path: context.path,\n          method: context.method,\n        });\n        return { status: 500, error: 'Authorization error' };\n      }\n    }\n\n    // Check custom rules\n    if ('rules' in authConfig && authConfig.rules && authConfig.rules.length > 0) {\n      const isAuthorized = await checkRules(authConfig.rules, context.path, context.method, user);\n      if (isAuthorized) {\n        return null; // Authorization passed\n      }\n      return { status: 403, error: 'Access denied' };\n    }\n\n    // Check default rules\n    if (defaultAuthConfig.rules && defaultAuthConfig.rules.length > 0) {\n      const isAuthorized = await checkRules(defaultAuthConfig.rules, context.path, context.method, user);\n      if (isAuthorized) {\n        return null; // Authorization passed\n      }\n    }\n\n    return { status: 403, error: 'Access denied' };\n  }\n\n  abstract stream(route: ServerRoute, response: TResponse, result: unknown): Promise<unknown>;\n  abstract getParams(route: ServerRoute, request: TRequest): Promise<ParsedRequestParams>;\n  abstract sendResponse(route: ServerRoute, response: TResponse, result: unknown): Promise<unknown>;\n  abstract registerRoute(app: TApp, route: ServerRoute, { prefix }: { prefix?: string }): Promise<void>;\n  abstract registerContextMiddleware(): void;\n  abstract registerAuthMiddleware(): void;\n\n  async init() {\n    this.registerContextMiddleware();\n    this.registerAuthMiddleware();\n    await this.registerCustomApiRoutes();\n    await this.registerRoutes();\n  }\n\n  /**\n   * Override in adapters to register custom API routes defined via registerApiRoute().\n   * Called by init() between registerAuthMiddleware() and registerRoutes().\n   */\n  async registerCustomApiRoutes(): Promise<void> {\n    // Default no-op. Adapters override this to register custom routes\n    // using their framework-specific middleware.\n  }\n\n  /**\n   * Creates an internal Hono sub-app with all custom API routes registered.\n   * Stores the handler on this instance for use by handleCustomRouteRequest().\n   * Returns true if custom routes were found and registered.\n   */\n  protected async buildCustomRouteHandler(): Promise<boolean> {\n    const routes = this.customApiRoutes ?? this.mastra.getServer()?.apiRoutes;\n    if (!routes || routes.length === 0) return false;\n\n    const NOT_FOUND_HEADER = 'x-mastra-custom-route-not-found';\n    const mastra = this.mastra;\n\n    const app = new Hono<{\n      Bindings: { requestContext?: RequestContext };\n      Variables: { mastra: Mastra; requestContext: RequestContext };\n    }>();\n\n    // Internal context middleware  sets variables that custom route handlers expect\n    app.use('*', async (c, next) => {\n      c.set('mastra', mastra);\n      c.set('requestContext', c.env?.requestContext ?? new RequestContext());\n      await next();\n    });\n\n    // Register each custom route\n    for (const route of routes) {\n      const handler =\n        'handler' in route && route.handler\n          ? route.handler\n          : 'createHandler' in route\n            ? await route.createHandler({ mastra })\n            : undefined;\n      if (!handler) continue;\n\n      const middlewares: any[] = [];\n      if (route.middleware) {\n        middlewares.push(...(Array.isArray(route.middleware) ? route.middleware : [route.middleware]));\n      }\n\n      const allHandlers = [...middlewares, handler];\n      if (route.method === 'ALL') {\n        app.all(route.path, allHandlers[0]!, ...allHandlers.slice(1));\n      } else {\n        app.on(route.method, route.path, allHandlers[0]!, ...allHandlers.slice(1));\n      }\n    }\n\n    // Mark unmatched requests so the adapter bridge can fall through to next()\n    app.notFound(() => new Response(null, { status: 404, headers: { [NOT_FOUND_HEADER]: 'true' } }));\n\n    this.customRouteHandler = async (request, env) => app.fetch(request, env);\n    return true;\n  }\n\n  /**\n   * Forwards a request to the internal custom route handler.\n   * Returns the Response if a custom route matched, or null to fall through.\n   * Used by non-Hono adapter bridges.\n   */\n  protected async handleCustomRouteRequest(\n    url: string,\n    method: string,\n    headers: Record<string, string | string[] | undefined>,\n    body: unknown,\n    requestContext?: RequestContext,\n  ): Promise<Response | null> {\n    if (!this.customRouteHandler) return null;\n\n    const fetchHeaders = new Headers();\n    for (const [key, value] of Object.entries(headers)) {\n      if (typeof value === 'string') fetchHeaders.set(key, value);\n      else if (Array.isArray(value))\n        value.forEach(v => {\n          fetchHeaders.append(key, v);\n        });\n    }\n\n    const init: RequestInit = { method, headers: fetchHeaders };\n    if (['POST', 'PUT', 'PATCH'].includes(method) && body !== undefined) {\n      const contentType = (typeof headers['content-type'] === 'string' ? headers['content-type'] : '') || '';\n      if (contentType.includes('application/json')) {\n        init.body = JSON.stringify(body);\n      } else if (typeof body === 'string') {\n        init.body = body;\n      } else if (body instanceof ArrayBuffer || body instanceof Uint8Array || body instanceof ReadableStream) {\n        init.body = body as any;\n      }\n    }\n\n    const request = new globalThis.Request(url, init);\n    const response = await this.customRouteHandler(request, { requestContext });\n\n    if (response.headers.get('x-mastra-custom-route-not-found') === 'true') return null;\n    return response;\n  }\n\n  /**\n   * Pipes a custom route Response to a Node.js ServerResponse (http.ServerResponse).\n   * Works with Koa (ctx.res), Express (res), and Fastify (reply.raw).\n   */\n  protected async writeCustomRouteResponse(\n    response: Response,\n    nodeRes: {\n      writeHead(status: number, headers: Record<string, string | string[]>): void;\n      write(chunk: unknown): void;\n      end(data?: string): void;\n    },\n  ): Promise<void> {\n    const headers: Record<string, string | string[]> = {};\n    response.headers.forEach((value, key) => {\n      if (key.toLowerCase() !== 'set-cookie') {\n        headers[key] = value;\n      }\n    });\n    const setCookies = response.headers.getSetCookie?.();\n    if (setCookies && setCookies.length > 0) {\n      headers['set-cookie'] = setCookies;\n    }\n    nodeRes.writeHead(response.status, headers);\n\n    if (response.body) {\n      const reader = response.body.getReader();\n      try {\n        while (true) {\n          const { done, value } = await reader.read();\n          if (done) break;\n          nodeRes.write(value);\n        }\n      } finally {\n        nodeRes.end();\n      }\n    } else {\n      nodeRes.end(await response.text());\n    }\n  }\n\n  async registerOpenAPIRoute(app: TApp, config: OpenAPIConfig = {}, { prefix }: { prefix?: string }): Promise<void> {\n    const {\n      title = 'Mastra API',\n      version = '1.0.0',\n      description = 'Mastra Server API',\n      path = '/openapi.json',\n    } = config;\n\n    const openApiSpec = generateOpenAPIDocument(SERVER_ROUTES, {\n      title,\n      version,\n      description,\n    });\n\n    // Set the servers field so Swagger UI knows routes are served under the prefix\n    if (prefix) {\n      openApiSpec.servers = [{ url: prefix }];\n    }\n\n    // Merge custom API routes into the OpenAPI spec\n    if (this.customApiRoutes && this.customApiRoutes.length > 0) {\n      const customPaths = convertCustomRoutesToOpenAPIPaths(this.customApiRoutes);\n      openApiSpec.paths = { ...openApiSpec.paths, ...customPaths };\n    }\n\n    const openApiRoute: ServerRoute = {\n      method: 'GET',\n      path,\n      responseType: 'json',\n      handler: async () => openApiSpec,\n    };\n\n    await this.registerRoute(app, openApiRoute, { prefix });\n  }\n\n  async registerRoutes(): Promise<void> {\n    // Register routes sequentially to maintain order - important for routers where\n    // more specific routes (e.g., /versions/compare) must be registered before\n    // parameterized routes (e.g., /versions/:versionId)\n    for (const route of SERVER_ROUTES) {\n      await this.registerRoute(this.app, route, { prefix: this.prefix });\n    }\n\n    if (this.openapiPath) {\n      await this.registerOpenAPIRoute(\n        this.app,\n        {\n          title: 'Mastra API',\n          version: '1.0.0',\n          description: 'Mastra Server API',\n          path: this.openapiPath,\n        },\n        { prefix: this.prefix },\n      );\n    }\n  }\n\n  async parsePathParams(route: ServerRoute, params: Record<string, string>): Promise<Record<string, any>> {\n    const pathParamSchema = route.pathParamSchema;\n    if (!pathParamSchema) {\n      return params;\n    }\n\n    return pathParamSchema.parseAsync(params);\n  }\n\n  async parseQueryParams(route: ServerRoute, params: Record<string, QueryParamValue>): Promise<Record<string, any>> {\n    const queryParamSchema = route.queryParamSchema;\n    if (!queryParamSchema) {\n      return params;\n    }\n\n    return queryParamSchema.parseAsync(params);\n  }\n\n  async parseBody(route: ServerRoute, body: unknown): Promise<unknown> {\n    const bodySchema = route.bodySchema;\n    if (!bodySchema) {\n      return body;\n    }\n\n    return bodySchema.parseAsync(body);\n  }\n}\n"]}