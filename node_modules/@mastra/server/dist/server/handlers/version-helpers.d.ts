/**
 * Generic version management helpers shared across all versioned editor primitives.
 * These utilities are domain-agnostic and work with any VersionedStorageDomain.
 */
export declare const DEFAULT_MAX_VERSIONS = 50;
/** Snapshot config fields for MCP client versioning. */
export declare const MCP_CLIENT_SNAPSHOT_CONFIG_FIELDS: readonly ["name", "description", "servers"];
/**
 * Deep equality comparison for comparing two values.
 * Handles primitives, arrays, objects, and Date instances.
 */
export declare function deepEqual(a: unknown, b: unknown): boolean;
/**
 * Generates a unique ID for a version using crypto.randomUUID()
 */
export declare function generateVersionId(): string;
/**
 * Extracts snapshot config fields from a version record.
 * Strips version-metadata fields (id, FK field, versionNumber, changedFields, changeMessage, createdAt).
 */
export declare function extractConfigFromVersion(version: Record<string, unknown>, snapshotConfigFields: readonly string[]): Record<string, unknown>;
/**
 * Compares two snapshots and returns an array of field names that changed.
 */
export declare function calculateChangedFields(previous: Record<string, unknown> | null | undefined, current: Record<string, unknown>): string[];
/**
 * Computes detailed diffs between two config snapshots.
 */
export declare function computeVersionDiffs(fromConfig: Record<string, unknown>, toConfig: Record<string, unknown>): Array<{
    field: string;
    previousValue: unknown;
    currentValue: unknown;
}>;
/**
 * Generic store interface for version management operations.
 * Works with any versioned storage domain.
 */
export interface VersionedStoreInterface<TEntity = unknown> {
    getLatestVersion: (parentId: string) => Promise<{
        id: string;
        versionNumber: number;
    } | null>;
    getVersion: (id: string) => Promise<{
        id: string;
        versionNumber: number;
    } | null>;
    createVersion: (params: Record<string, unknown>) => Promise<unknown>;
    update: (params: Record<string, unknown>) => Promise<TEntity>;
    listVersions: (params: Record<string, unknown>) => Promise<{
        versions: Array<{
            id: string;
            versionNumber: number;
        }>;
        total: number;
        page: number;
        perPage: number | false;
        hasMore: boolean;
    }>;
    deleteVersion: (id: string) => Promise<void>;
}
/**
 * Enforces version retention limit by deleting oldest versions that exceed the maximum.
 * Never deletes the active version.
 */
export declare function enforceRetentionLimit(store: Pick<VersionedStoreInterface, 'listVersions' | 'deleteVersion'>, parentId: string, parentIdField: string, activeVersionId: string | undefined | null, maxVersions?: number): Promise<{
    deletedCount: number;
}>;
/**
 * Creates a new version with retry logic for race condition handling.
 */
export declare function createVersionWithRetry(store: Pick<VersionedStoreInterface, 'getLatestVersion' | 'createVersion'>, parentId: string, parentIdField: string, snapshotConfig: Record<string, unknown>, changedFields: string[], options?: {
    changeMessage?: string;
    maxRetries?: number;
}): Promise<{
    versionId: string;
    versionNumber: number;
}>;
/**
 * Handles auto-versioning after an entity update.
 * Creates a new version if config fields changed, but does NOT update activeVersionId.
 */
export declare function handleAutoVersioning<TEntity>(store: VersionedStoreInterface<TEntity>, parentId: string, parentIdField: string, snapshotConfigFields: readonly string[], existingEntity: TEntity & {
    activeVersionId?: string;
}, updatedEntity: TEntity, configFields?: Record<string, unknown>): Promise<{
    entity: TEntity;
    versionCreated: boolean;
}>;
//# sourceMappingURL=version-helpers.d.ts.map