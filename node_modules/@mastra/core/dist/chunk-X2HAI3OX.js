import EventEmitter from 'events';

// src/events/pubsub.ts
var PubSub = class {
};
var EventEmitterPubSub = class extends PubSub {
  emitter;
  constructor(existingEmitter) {
    super();
    this.emitter = existingEmitter ?? new EventEmitter();
  }
  async publish(topic, event) {
    const id = crypto.randomUUID();
    const createdAt = /* @__PURE__ */ new Date();
    this.emitter.emit(topic, {
      ...event,
      id,
      createdAt
    });
  }
  async subscribe(topic, cb) {
    this.emitter.on(topic, cb);
  }
  async unsubscribe(topic, cb) {
    this.emitter.off(topic, cb);
  }
  async flush() {
  }
  /**
   * Clean up all listeners during graceful shutdown.
   */
  async close() {
    this.emitter.removeAllListeners();
  }
};

export { EventEmitterPubSub, PubSub };
//# sourceMappingURL=chunk-X2HAI3OX.js.map
//# sourceMappingURL=chunk-X2HAI3OX.js.map