'use strict';

var chunk32UHMKRP_cjs = require('./chunk-32UHMKRP.cjs');
var chunkPF6MO6L3_cjs = require('./chunk-PF6MO6L3.cjs');

// ../../node_modules/.pnpm/@standard-community+standard-openapi@0.2.9_@standard-community+standard-json@0.3.5_@sta_d040a6944a3a4ac0b81f62afd97a798c/node_modules/@standard-community/standard-openapi/dist/valibot-D_HTw1Gn.js
function getToOpenAPISchemaFn() {
  return async (schema, context) => {
    const openapiSchema = await chunkPF6MO6L3_cjs.toJsonSchema(schema, {
      errorMode: "ignore",
      // @ts-expect-error
      overrideAction: ({ valibotAction, jsonSchema }) => {
        const _jsonSchema = chunk32UHMKRP_cjs.convertToOpenAPISchema(jsonSchema, context);
        if (valibotAction.kind === "metadata" && valibotAction.type === "metadata" && !("$ref" in _jsonSchema)) {
          const metadata = valibotAction.metadata;
          if (metadata.example !== void 0) {
            _jsonSchema.example = metadata.example;
          }
          if (metadata.examples && metadata.examples.length > 0) {
            _jsonSchema.examples = metadata.examples;
          }
          if (metadata.ref) {
            context.components.schemas = {
              ...context.components.schemas,
              [metadata.ref]: _jsonSchema
            };
            return {
              $ref: `#/components/schemas/${metadata.ref}`
            };
          }
        }
        return _jsonSchema;
      },
      ...context.options
    });
    if ("$schema" in openapiSchema) {
      delete openapiSchema.$schema;
    }
    return openapiSchema;
  };
}

module.exports = getToOpenAPISchemaFn;
//# sourceMappingURL=valibot-D_HTw1Gn-YHTB53Q2.cjs.map
//# sourceMappingURL=valibot-D_HTw1Gn-YHTB53Q2.cjs.map